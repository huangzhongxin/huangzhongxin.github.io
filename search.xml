<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[webpackä¸­çš„ä¸€äº›å¸¸ç”¨é…ç½®]]></title>
    <url>%2F2019%2F11%2F29%2Fwebpack%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä»‹ç»äº†webpackä¸­4ä¸ªæ’ä»¶çš„ä½¿ç”¨ã€‚ è‡ªåŠ¨æ¸…ç†æž„å»ºç›®å½• æ¯æ¬¡webpackæž„å»ºå®Œä¹‹åŽï¼Œéƒ½ä¼šåœ¨è¾“å‡ºç›®å½•ç”Ÿæˆæž„å»ºå¥½çš„æ–‡ä»¶ã€‚å¦‚æžœæ²¡æœ‰æ¸…ç†æŽ‰ä¹‹å‰çš„æž„å»ºæ–‡ä»¶çš„è¯ï¼Œåœ¨å¤šæ¬¡æž„å»ºä¹‹åŽï¼Œè¿™ä¸ªè¾“å‡ºç›®å½•æ— ç”¨æ–‡ä»¶å°±ä¼šå¾ˆå¤šã€‚è€Œæ‰‹åŠ¨æ¸…ç†åˆæ¯”è¾ƒéº»çƒ¦ã€‚webpackä¸­clean-webpack-pluginå¯ä»¥å®žçŽ°æ¯æ¬¡æž„å»ºå‰ï¼Œè‡ªåŠ¨åˆ é™¤outputæŒ‡å®šçš„ç›®å½•ï¼š ä½¿ç”¨å‰å…ˆå®‰è£…ï¼š 1npm i clean-webpack-plugin -D 123456789101112131415161718// webpack.config.jsconst path = require('path')const &#123; CleanWebpackPlugin &#125; = require('clean-webpack-plugin')module.exporte = &#123; entry: &#123; index: './src/index.js', search: './src/search.js' &#125;, output: &#123; path: path.join(__dirname, 'dist'), filename: '[name].[chunkhash:8].js' &#125;, plugins: [ // ... new CleanWebpackPlugin() ], // ...&#125; æ³¨æ„ï¼Œåœ¨clean-webpack-plugin v3çš„ç‰ˆæœ¬ä¸­ï¼Œåªèƒ½å¤Ÿä½¿ç”¨è§£æž„çš„æ–¹å¼å¼•å…¥ è‡ªåŠ¨è¡¥é½CSS3å‰ç¼€ ç”±äºŽæµè§ˆå™¨æ ‡å‡†æ²¡æœ‰ç»Ÿä¸€ï¼Œæˆ‘ä»¬éœ€è¦åŽ»å…¼å®¹è®¸å¤šé—®é¢˜ï¼Œæ¯”å¦‚æ ·å¼ä¸ä¸€æ ·ã€‚ä¸åŒæµè§ˆå™¨CSSæ ·å¼å¯èƒ½éœ€è¦ä¸åŒçš„å‰ç¼€ï¼Œå¦‚ -webkitã€-moz ç­‰ç­‰ï¼Œå¯ä»¥ä½¿ç”¨ autoprefixer æ¥è‡ªåŠ¨è¡¥å…¨å‰ç¼€ã€‚ autoprefixer æ˜¯ä¸€ä¸ªåŽç½®å¤„ç†å™¨ï¼Œæ ¹æ®çš„æ˜¯ Can I Use è¿™ä¸ªç½‘ç«™ä¸Šç»™å‡ºçš„å…¼å®¹æƒ…å†µè¿›è¡Œè¡¥é½å‰ç¼€ã€‚ autoprefixer ä¸€èˆ¬æ˜¯ä¸Ž postcss-loader ä¸€èµ·ä½¿ç”¨ï¼Œæ‰€ä»¥ä½¿ç”¨å‰éœ€è¦å…ˆå®‰è£…ä¸¤è€…ï¼š 1npm i postcss-loader autoprefixer -D å®‰è£…å®Œæ¯•ä¹‹åŽï¼Œå°±å¯ä»¥é…ç½®ä¸‹ webpack.config.jsï¼š 1234567891011121314151617181920212223242526272829303132333435// webpack.config.jsconst path = require('path')module.exporte = &#123; entry: &#123; index: './src/index.js', search: './src/search.js' &#125;, output: &#123; path: path.join(__dirname, 'dist'), filename: '[name].[chunkhash:8].js' &#125;, module: &#123; rules: [ &#123; test: /\.jsx?$/, use: 'babel-loader' &#125;, &#123; test: /\.css$/, use: [MiniCssExtractPlugin.loader, 'css-loader', 'postcss-loader'] &#125;, &#123; test: /\.less$/, use: [MiniCssExtractPlugin.loader, 'css-loader', 'less-loader', 'postcss-loader'] &#125;, ] &#125;, plugins: [ new MiniCssExtractPlugin(&#123; filename: '[name].[contenthash:8].css' &#125;) ] // ...&#125; ç„¶åŽå¢žåŠ postcss-loaderçš„é…ç½®æ–‡ä»¶postcss.config.jsï¼š 1234// postcss.config.jsmodule.exports = &#123; plugins: [require('autoprefixer')]&#125; æ­¤å¤–è¿˜éœ€è¦åœ¨package.jsonæˆ–.broswerlistrcä¸­å¢žåŠ autoprefixerè¦å…¼å®¹çš„æµè§ˆå™¨ç‰ˆæœ¬ï¼š 1browserslist: ["last 2 version", "&gt;1%"] é™æ€èµ„æºå†…è” é™æ€èµ„æºå†…è”ï¼Œå¯ä»¥å‡å°‘HTTPè¯·æ±‚æ•°ï¼›CSSå†…è”ä¹Ÿå¯ä»¥é¿å…é¡µé¢é—ªåŠ¨ï¼›JSä»£ç å†…è”å¯ä»¥ç”¨äºŽä¸ŠæŠ¥ç›¸å…³æ‰“ç‚¹ï¼Œä»¥åŠå®Œæˆé¡µé¢æ¡†æž¶çš„åˆå§‹åŒ–å·¥ä½œã€‚ ä½¿ç”¨raw-loaderè¾¾åˆ°é™æ€èµ„æºå†…è”çš„ç›®çš„ã€‚ Â¶JS/HTMLçš„å†…è” åœ¨ html é¡µé¢ä¸­éœ€è¦å†…è”é™æ€èµ„æºçš„åœ°æ–¹ï¼Œä½¿ç”¨raw-loaderçš„è¯­æ³•ï¼Œå°†é™æ€èµ„æºå¼•å…¥å°±å¯ä»¥ï¼š 1234// html$&#123;require('raw-loader!/path/to/assert.html').default&#125;// js$&#123;require('raw-loader!babel-loader!/path/to/assert.js').default&#125; æ³¨æ„ï¼šåœ¨ raw-loader v0.5.1 ä¸­ï¼Œrequire åŽä¸éœ€è¦åŠ  .default Â¶CSSçš„å†…è” åœ¨ webpack.config.js çš„ module ä½¿ç”¨ style-loader æ’ä»¶å³å¯ã€‚ px è‡ªåŠ¨è½¬æ¢ä¸º rem rem: font-size of root element -&gt; Remå¸ƒå±€çš„åŽŸç†è§£æž pxè½¬æ¢ä¸ºremï¼Œå¯ä»¥ä½¿ç”¨ px2rem-loader æ’ä»¶å®Œæˆã€‚ä½¿ç”¨æ—¶ï¼Œéœ€è¦æŒ‡å®šä¸¤ä¸ªå‚æ•°ï¼šremUnit - remçš„å•ä½ï¼Œå³ 1rem = remUnit pxï¼ŒremPrecesion - è½¬æ¢æˆ rem åŽä¿ç•™çš„å°æ•°ä½æ•°ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859// webpack.config.jsconst path = require('path')module.exporte = &#123; entry: &#123; index: './src/index.js', search: './src/search.js' &#125;, output: &#123; path: path.join(__dirname, 'dist'), filename: '[name].[chunkhash:8].js' &#125;, module: &#123; rules: [ &#123; test: /\.jsx?$/, use: 'babel-loader' &#125;, &#123; test: /\.css$/, use: [ MiniCssExtractPlugin.loader, 'css-loader', 'less-loader', 'postcss-loader', &#123; loader: 'px2rem-loader', options: &#123; remUnit: 75, remPrecesion: 8 &#125; &#125; ] &#125;, &#123; test: /\.less$/, use: [ MiniCssExtractPlugin.loader, 'css-loader', 'less-loader', 'postcss-loader', &#123; loader: 'px2rem-loader', options: &#123; remUnit: 75, remPrecesion: 8 &#125; &#125; ] &#125;, ] &#125;, plugins: [ new MiniCssExtractPlugin(&#123; filename: '[name].[contenthash:8].css' &#125;) ] // ...&#125; æ­¤å¤–ï¼Œä¸ºäº†åŠ¨æ€è®¡ç®—æ ¹èŠ‚ç‚¹çš„ font-sizeï¼Œå¯ä»¥åœ¨CSSä¸­åŠ å…¥ï¼š 123html: &#123; font-size:calc(100vw/å›ºå®šåˆ†è¾¨çŽ‡)&#125;]]></content>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[webpackä¸­çš„ä»£ç åŽ‹ç¼©]]></title>
    <url>%2F2019%2F11%2F26%2Fwebpack%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E5%8E%8B%E7%BC%A9%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä»‹ç»äº†webpackä¸­JSã€HTMLã€CSSè¿›è¡Œä»£ç åŽ‹ç¼©çš„æ–¹å¼ã€‚ JS è®¾ç½® modeä¸º production é…ç½®åŽï¼Œwebpack v4+ é»˜è®¤ä¼šåŽ‹ç¼©ä½ çš„ä»£ç ã€‚ç”Ÿäº§çŽ¯å¢ƒä¸‹é»˜è®¤ä½¿ç”¨ UglifyJSPluginã€‚ æ‰€ä»¥æ— éœ€æ‰‹åŠ¨é…ç½®åŽ‹ç¼©é€‰é¡¹ã€‚ HTML åŽ‹ç¼©HTMLå¯ä»¥ä½¿ç”¨æ’ä»¶html-webpack-pluginï¼Œå¹¶é…ç½®ç›¸å…³å‚æ•°è¿›è¡Œä½¿ç”¨ï¼Œè¿™é‡Œç»™å‡ºä¸€ä¸ªä¾‹å­ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576// webpack.config.jsconst path = require('path')const MiniCssExtractPlugin = require('mini-css-extract-plugin')const HtmlWebpackPlugin = require('html-webpack-plugin')module.exports = &#123; mode: 'production', entry: &#123; index: './src/index.js', search: './src/index2.jsx' &#125;, output: &#123; path: path.join(__dirname, 'dist'), filename: '[name].[chunkhash:8].js' &#125;, module: &#123; rules: [ &#123; test: /\.jsx?$/, use: 'babel-loader' &#125;, &#123; test: /\.css$/, use: [MiniCssExtractPlugin.loader, 'css-loader'] &#125;, &#123; test: /\.less$/, use: [MiniCssExtractPlugin.loader, 'css-loader', 'less-loader'] &#125;, &#123; test: /\.(png|svg|jpg|gif)$/, use: [ &#123; loader: 'file-loader', options: &#123; name: 'img/[name].[hash:8].[ext]' &#125; &#125; ] &#125; ] &#125;, plugins: [ new MiniCssExtractPlugin(&#123; filename: '[name].[contenthash:8].css' &#125;), new HtmlWebpackPlugin(&#123; template: path.join(__dirname, './src/index.html'), // ä½¿ç”¨çš„æ¨¡æ¿ filename: 'idnex.html', // ç”Ÿæˆçš„æ–‡ä»¶å chunks: ['index'], // ç”Ÿæˆçš„htmlä½¿ç”¨çš„chunk inject: true, // è®¾ç½®ä¸ºtrueæ—¶ï¼Œä½¿ç”¨åˆ°çš„chunkï¼Œcssä¼šè‡ªåŠ¨æ³¨å…¥åˆ°htmlä¸­ minify: &#123; html5: true, minifyCSS: true, // åŽ‹ç¼©å†…è”CSS minifyJS: true, // åŽ‹ç¼©å†…è”JS removeComments: true, // ç§»é™¤æ³¨é‡Š collapseWhitespace: true, // åˆ é™¤ç©ºæ ¼ã€æ¢è¡Œç­‰ç©ºç™½ç¬¦ preserveLineBreaks: false, // ä¿ç•™æ¢è¡Œ &#125; &#125;), new HtmlWebpackPlugin(&#123; template: path.join(__dirname, './src/search.html'), // ä½¿ç”¨çš„æ¨¡æ¿ filename: 'search.html', // ç”Ÿæˆçš„æ–‡ä»¶å chunks: ['search'], // ç”Ÿæˆçš„htmlä½¿ç”¨çš„chunk inject: true, // è®¾ç½®ä¸ºtrueæ—¶ï¼Œä½¿ç”¨åˆ°çš„chunkï¼Œcssä¼šè‡ªåŠ¨æ³¨å…¥åˆ°htmlä¸­ minify: &#123; html5: true, minifyCSS: true, // åŽ‹ç¼©å†…è”CSS minifyJS: true, // åŽ‹ç¼©å†…è”JS removeComments: true, // ç§»é™¤æ³¨é‡Š collapseWhitespace: true, // åˆ é™¤ç©ºæ ¼ã€æ¢è¡Œç­‰ç©ºç™½ç¬¦ preserveLineBreaks: false, // ä¿ç•™æ¢è¡Œ &#125; &#125;) ]&#125; åŽ‹ç¼©å‰ï¼š åŽ‹ç¼©åŽï¼š CSS åŽ‹ç¼©CSSä»£ç ï¼Œå¯é€šè¿‡optimize-css-assets-webpack-pluginæ’ä»¶å®Œæˆã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182// webpack.config.jsconst path = require('path')const MiniCssExtractPlugin = require('mini-css-extract-plugin')const OptimizeCssAssetsWebpackPlugin = require('optimize-css-assets-webpack-plugin')const HtmlWebpackPlugin = require('html-webpack-plugin')module.exports = &#123; mode: 'production', entry: &#123; index: './src/index.js', search: './src/index2.jsx' &#125;, output: &#123; path: path.join(__dirname, 'dist'), filename: '[name].[chunkhash:8].js' &#125;, module: &#123; rules: [ &#123; test: /\.jsx?$/, use: 'babel-loader' &#125;, &#123; test: /\.css$/, use: [MiniCssExtractPlugin.loader, 'css-loader'] &#125;, &#123; test: /\.less$/, use: [MiniCssExtractPlugin.loader, 'css-loader', 'less-loader'] &#125;, &#123; test: /\.(png|svg|jpg|gif)$/, use: [ &#123; loader: 'file-loader', options: &#123; name: 'img/[name].[hash:8].[ext]' &#125; &#125; ] &#125; ] &#125;, plugins: [ new MiniCssExtractPlugin(&#123; filename: '[name].[contenthash:8].css' &#125;), new HtmlWebpackPlugin(&#123; template: path.join(__dirname, './src/index.html'), // ä½¿ç”¨çš„æ¨¡æ¿ filename: 'index.html', // ç”Ÿæˆçš„æ–‡ä»¶å chunks: ['index'], // ç”Ÿæˆçš„htmlä½¿ç”¨çš„chunk inject: true, // è®¾ç½®ä¸ºtrueæ—¶ï¼Œä½¿ç”¨åˆ°çš„chunkï¼Œcssä¼šè‡ªåŠ¨æ³¨å…¥åˆ°htmlä¸­ minify: &#123; html5: true, minifyCSS: true, // åŽ‹ç¼©å†…è”CSS minifyJS: true, // åŽ‹ç¼©å†…è”JS removeComments: true, // ç§»é™¤æ³¨é‡Š collapseWhitespace: true, // åˆ é™¤ç©ºæ ¼ã€æ¢è¡Œç­‰ç©ºç™½ç¬¦ preserveLineBreaks: false, // ä¿ç•™æ¢è¡Œ &#125; &#125;), new HtmlWebpackPlugin(&#123; template: path.join(__dirname, './src/search.html'), // ä½¿ç”¨çš„æ¨¡æ¿ filename: 'search.html', // ç”Ÿæˆçš„æ–‡ä»¶å chunks: ['search'], // ç”Ÿæˆçš„htmlä½¿ç”¨çš„chunk inject: true, // è®¾ç½®ä¸ºtrueæ—¶ï¼Œä½¿ç”¨åˆ°çš„chunkï¼Œcssä¼šè‡ªåŠ¨æ³¨å…¥åˆ°htmlä¸­ minify: &#123; html5: true, minifyCSS: true, // åŽ‹ç¼©å†…è”CSS minifyJS: true, // åŽ‹ç¼©å†…è”JS removeComments: true, // ç§»é™¤æ³¨é‡Š collapseWhitespace: true, // åˆ é™¤ç©ºæ ¼ã€æ¢è¡Œç­‰ç©ºç™½ç¬¦ preserveLineBreaks: false, // ä¿ç•™æ¢è¡Œ &#125; &#125;), new OptimizeCssAssetsWebpackPlugin(&#123; assetNameRegExp: /\.css$/g, // éœ€è¦åŽ‹ç¼©çš„æ–‡ä»¶åçš„æ­£åˆ™è¡¨è¾¾å¼ cssProcessor: require('cssnano') // ä½¿ç”¨çš„åŽ‹ç¼©å¤„ç†å™¨ &#125;) ]&#125; åŽ‹ç¼©å‰ï¼š åŽ‹ç¼©åŽï¼š æ€»ç»“ webpackä¸­å¯¹äºŽä»£ç åŽ‹ç¼©è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œåªè¦é…ç½®ä¸€äº›æ’ä»¶å°±èƒ½å¤Ÿå®žçŽ°äº†ï¼Œå› æ­¤ä¸Šæ‰‹éš¾åº¦å¹¶ä¸å¤§ã€‚]]></content>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[webpackä¸­çš„æ–‡ä»¶æŒ‡çº¹:hash/chunkhash/contenthash]]></title>
    <url>%2F2019%2F11%2F23%2Fwebpack%E4%B8%AD%E7%9A%84%E6%96%87%E4%BB%B6%E6%8C%87%E7%BA%B9-hash-chunkhash-contenthash%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä»‹ç»äº†webpackä¸­çš„ä¸‰ç§æ–‡ä»¶æŒ‡çº¹çš„ç”¨æ³•åŠå…¶åŒºåˆ«ã€‚ ä»€ä¹ˆæ˜¯æ–‡ä»¶æŒ‡çº¹ æ‰€è°“çš„æ–‡ä»¶æŒ‡çº¹å°±æ˜¯ä¸€ä¸ªhashå€¼ï¼ˆæˆ–hashå€¼çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ–‡ä»¶æŒ‡çº¹æ¥å®žçŽ°å‰ç«¯èµ„æºçš„å¢žé‡æ›´æ–°ã€‚å…·ä½“è€Œè¨€ï¼Œå°±æ˜¯åœ¨èµ„æºåä¸Šæ·»åŠ ä¸€æ®µhashå€¼ï¼Œé€šè¿‡æµè§ˆå™¨çš„ç¼“å­˜ç­–ç•¥ï¼Œå®žçŽ°æœªæ”¹åŠ¨çš„èµ„æºä¸é‡å¤ä¸‹è½½ã€‚æ¯”å¦‚Element UIå®˜ç½‘ä¸­ï¼Œå°±æœ‰ä½¿ç”¨åˆ°æ–‡ä»¶æŒ‡çº¹ï¼š ä½¿ç”¨ åœ¨webpackä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®outputçš„filenameå­—æ®µï¼Œæ¥æŽ§åˆ¶è¾“å‡ºçš„æ–‡ä»¶åã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™è¾¹åŠ ä¸Š[hash]ç­‰å ä½ç¬¦ï¼Œæ¥å®žçŽ°æ–‡ä»¶æŒ‡çº¹ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬é…ç½®webpack.config.jså†…å®¹å¦‚ä¸‹ï¼š 12345678910111213// webpack.config.jsconst path = require('path');module.exports = &#123; entry: &#123; vendor: './src/vendor.js', index: './src/index.js' &#125;, output: &#123; path: path.join(__dirname, 'dist'), filename: '[name].[hash].js' &#125;&#125;; è¿è¡Œnpm run buildåŽå°±èƒ½å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œè¾“å‡ºçš„æ–‡ä»¶åä¸Šå·²ç»å¤šå‡ºäº†ä¸€ä¸²hashå€¼ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶åä¸Šçš„hashæ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡æž„å»ºå‡ºæ¥ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªæ–°æž„å»ºçš„ï¼Œä¸ç®¡å…¶æ˜¯å¦çœŸæ­£æ”¹åŠ¨è¿‡ã€‚è¿™æ ·å¹¶ä¸ç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸï¼šåªæ›´æ–°æˆ‘ä»¬æœ‰æ”¹åŠ¨çš„æ–‡ä»¶ï¼Œè€Œæœªæ”¹åŠ¨çš„ä¸éœ€è¦ç”¨æˆ·åŽ»ä¸‹è½½ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬æ ¹æ®ä¸åŒæ–‡ä»¶ï¼Œä½¿ç”¨webpackç»™æˆ‘ä»¬æä¾›çš„ä¸åŒå ä½ç¬¦ï¼š[hash]ã€[chunkhash]ã€[contenthash] Â¶[hash] hashæ˜¯æ ¹æ®æ•´ä¸ªé¡¹ç›®çš„æž„å»ºæ±‚å‡ºæ¥çš„ï¼Œå¦‚æžœä½¿ç”¨äº†hashï¼Œé‚£ä¹ˆæ¯ä¸ªæ¨¡å—éƒ½ä¼šæœ‰åŒæ ·çš„hashå€¼ï¼Œä¸ç®¡è¿™ä¸ªæ¨¡å—æ˜¯ä¸æ˜¯åˆæ”¹åŠ¨è¿‡ã€‚å› æ­¤ä¸èƒ½è¾¾åˆ°å¢žé‡æ›´æ–°çš„æ•ˆæžœã€‚ Â¶[chunkhash] chunkhashæ˜¯ç”±chunkè®¡ç®—çš„å¾—å‡ºçš„hashå€¼ï¼ŒchunkæŒ‡çš„æ˜¯æ¨¡å—ï¼Œè¿™ä¸ªhashå€¼å°±æ˜¯æ¨¡å—å†…å®¹è®¡ç®—å‡ºæ¥çš„hashå€¼ã€‚ Â¶ç”¨æ³• 12345678910111213// webpack.config.jsconst path = require('path');module.exports = &#123; entry: &#123; vendor: './src/vendor.js', index: './src/index.js' &#125;, output: &#123; path: path.join(__dirname, 'dist'), filename: '[name].[chunkhash].js' &#125;&#125;; è¿è¡Œnpm run buildåŽå°±èƒ½å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š æ”¹å˜å‰ï¼š æ”¹å˜vendor.jsåŽï¼š å¯ä»¥çœ‹åˆ°vendorçš„hashå·²ç»æ”¹å˜äº†ï¼Œè€Œindexå¾—æ²¡æœ‰å‘ç”Ÿæ”¹å˜ã€‚ æ³¨æ„ï¼šä¸ºäº†è®©hashå€¼ä¿æŒç¨³å®šï¼Œè¿˜åº”æ·»åŠ NamedModulesPlugin(å¼€å‘çŽ¯å¢ƒ)æˆ–HashedModuleIdsPlugin(ç”Ÿäº§çŽ¯å¢ƒ)ï¼Œè¿™ä¸¤ä¸ªpluginèƒ½å¤Ÿè®©webpackä½¿ç”¨ç›¸å¯¹è·¯å¾„è€Œéžæ¨¡å—idæ¥å‘½åæ¨¡å—ã€‚ å¦‚æžœæˆ‘ä»¬å°†jsä¸­çš„cssæŠ½å–æˆå•ç‹¬çš„æ–‡ä»¶åŽï¼Œå¹¶ä¸”ä¹Ÿæ˜¯ç”¨chunkhashï¼Œä¼šå‡ºçŽ°è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šä»…ä»…æ”¹åŠ¨äº†jsæ–‡ä»¶ï¼Œcssä¹Ÿè·Ÿç€ä¸€èµ·æ”¹äº†ï¼Œè¿™å°±å¯¼è‡´äº†ä¸å¿…è¦çš„æ›´æ–°ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬åœ¨cssç­‰æ–‡ä»¶ä¸­ï¼Œéœ€è¦ä½¿ç”¨ä¸‹é¢çš„contenthashè¿™ä¸ªå ä½ç¬¦ã€‚ Â¶[contenthash] contenthashç”¨äºŽæ±‚æ–‡ä»¶å†…å®¹çš„hashå€¼ã€‚è¿™ä¸ªhashå€¼åªä¸Žæ–‡ä»¶å†…å®¹æœ‰å…³ï¼Œè€Œä¸Žchunkæ— å…³ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨MiniCssExtractPluginå°†jsä¸­çš„cssæŠ½å–å‡ºæ¥ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344// webpack.config.jsconst path = require('path')const MiniCssExtractPlugin = require('mini-css-extract-plugin')module.exports = &#123; mode: 'production', entry: &#123; index: './src/index.js', vendor: './src/vendor.js' &#125;, output: &#123; path: path.join(__dirname, 'dist'), filename: '[name].[chunkhash].js' &#125;, module: &#123; rules: [ &#123; test: /\.jsx?$/, use: 'babel-loader' &#125;, &#123; test: /\.css$/, use: [MiniCssExtractPlugin.loader, 'css-loader'] &#125;, &#123; test: /\.less$/, use: [MiniCssExtractPlugin.loader, 'css-loader', 'less-loader'] &#125;, &#123; test: /\.s[ac]ss$/, use: [MiniCssExtractPlugin.loader, 'css-loader', 'sass-loader'] &#125;, &#123; test: /\.(png|svg|jpg|gif)$/, use: ['file-loader'] &#125; ] &#125;, plugins: [ new MiniCssExtractPlugin(&#123; filename: '[name].[contenthash].css' &#125;) ]&#125; è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œloaderä¸Šï¼Œæˆ‘ä»¬ä½¿ç”¨äº†MiniCssExtractPlugin.loaderè€Œä¸æ˜¯style-loaderï¼Œå› ä¸ºstyle-loaderçš„ç”¨å¤„æ˜¯å°†cssæ”¾åˆ°&lt;style&gt;æ ‡ç­¾ä¸­ï¼Œä¸ŽMiniCssExtractPlugin.loaderå†²çªäº†ã€‚ è¿è¡Œnpm run buildå°±èƒ½çœ‹åˆ°cssçš„hashå€¼å·²ç»ä¸Žjsæ— å…³äº†ï¼š æœ€åŽ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸Šé¢ç”Ÿæˆçš„hashéƒ½æ˜¯æ¯”è¾ƒé•¿çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å ä½ç¬¦ä¸ŠæŒ‡å®šæˆ‘ä»¬è¦çš„é•¿åº¦ï¼Œæ¥ç”Ÿæˆæˆ‘ä»¬æƒ³è¦çš„ä½æ•°ï¼Œå¦‚ï¼š[hash:8]ã€[chunkhash:8]ã€[contenthash:8] å‚è€ƒ webpackç¨³å®šmoduleidå’Œchunkidä»¥å®žçŽ°æŒä¹…åŒ–ç¼“å­˜çš„æ¢³ç†]]></content>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[webpackä¸­çš„æ–‡ä»¶ç›‘å¬åŠçƒ­æ›´æ–°]]></title>
    <url>%2F2019%2F11%2F18%2Fwebpack%E4%B8%AD%E7%9A%84%E6%96%87%E4%BB%B6%E7%9B%91%E5%90%AC%E5%8F%8A%E7%83%AD%E6%9B%B4%E6%96%B0%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä»‹ç»äº†webpackä¸­å¼€å¯æ–‡ä»¶ç›‘å¬çš„ä¸¤ç§æ–¹æ³•ä»¥åŠçƒ­æ›´æ–°çš„åŽŸç† æ–‡ä»¶ç›‘å¬ webpackä¸­ï¼Œä¸ºäº†é¿å…æ¯æ¬¡æ›´æ–°ä»£ç åŽéƒ½éœ€è¦æ‰‹åŠ¨æž„å»ºï¼Œå¯ä»¥å¼€å¯æ–‡ä»¶ç›‘å¬é€‰é¡¹ã€‚å¼€å¯æ–‡ä»¶ç›‘å¬åŽï¼Œwebpackä¼šè°ƒç”¨Node.jsé‡Œé¢çš„æ–‡ä»¶è¯»å–API fsè¿™ä¸ªæ¨¡å—æ¥åˆ¤æ–­æ–‡ä»¶å†…å®¹æ˜¯å¦å˜åŒ–ï¼Œå¹¶ä¸”åœ¨æ–‡ä»¶å˜åŒ–çš„æ—¶å€™è‡ªåŠ¨æž„å»ºã€‚ å¼€å¯æ–‡ä»¶ç›‘å¬çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼š å‘½ä»¤è¡Œ webpack.config.jsä¸­è¿›è¡Œé…ç½® Â¶å‘½ä»¤è¡Œ åœ¨å¯åŠ¨webpackå‘½ä»¤çš„æ—¶å€™ï¼Œå¸¦ä¸Š--watchå‚æ•°å³å¯ï¼Œå³ï¼š 1webpack --watch Â¶é…ç½®æ–‡ä»¶ 123456789101112131415// webpack.config.jsmodule.exports = &#123; // ... // æ˜¯å¦å¼€å¯æ–‡ä»¶ç›‘å¬ï¼Œé»˜è®¤falseï¼Œå³ä¸å¼€å¯ watch: true, // åªæœ‰è®¾ç½®äº† watch === trueï¼ŒwatchOptionsæ‰æœ‰ç”¨ watchOptions: &#123; // ä¸ç›‘å¬çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œæ”¯æŒæ­£åˆ™ï¼Œé»˜è®¤ä¸ºç©º ignored: /node_modules/, // ç›‘å¬åˆ°æ”¹å˜åŽçš„å»¶æ—¶ï¼Œé»˜è®¤300ms aggregateTimeout: 300, // è½®è¯¢é—´éš”ï¼Œé»˜è®¤1000ms poll: 1000 &#125;&#125; çƒ­æ›´æ–° Â¶ä½¿ç”¨ çƒ­æ›´æ–°éœ€è¦ä½¿ç”¨åˆ°æ’ä»¶webpack-dev-server(WDS)ï¼ŒWDSä½¿ç”¨æ—¶éœ€è¦é…åˆæ’ä»¶HotModuleReplacementPluginä¸€èµ·ä½¿ç”¨ï¼ˆè¿™ä¸ªæ’ä»¶ä¼šåœ¨é…ç½®hot: trueè‡ªåŠ¨æ·»åŠ ï¼Œå¯ä»¥ä¸æ‰‹åŠ¨æ·»åŠ ï¼‰ é¦–å…ˆï¼Œå…ˆå®‰è£…WDSï¼š 1npm i webpack-dev-server -D ä½¿ç”¨æ—¶ï¼Œåœ¨webpack.config.jsä¸­é…ç½®ä¸‹devServerï¼š 12345678// webpack.config.jsmodule.exports = &#123; // ... devServer: &#123; contentBase: './dist', // WDSçš„åŸºç¡€ç›®å½• hot: true &#125;&#125; æœ€åŽä½¿ç”¨å‘½ä»¤webpack-dev-server --openå¯åŠ¨å³å¯ â€“openï¼šåœ¨æž„å»ºç»“æŸåŽè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ Â¶åŽŸç† webpack compiler: å°†JSæž„å»ºä¸ºBundle HMR Server: å°†çƒ­æ›´æ–°çš„æ–‡ä»¶è¾“å‡ºç»™HMR Runtime Bundle Server: æä¾›æ–‡ä»¶åœ¨æµè§ˆå™¨è®¿é—® HMR Runtime: è¢«æ³¨å…¥åˆ°bundle.jsä¸­ï¼Œæ›´æ–°æ–‡ä»¶å˜åŒ– bundle.js: æž„å»ºè¾“å‡ºçš„æ–‡ä»¶ çƒ­æ›´æ–°ä¸­æœ€æ ¸å¿ƒçš„æ˜¯HMR Serverå’ŒHMR Runtimeï¼š HMR Serveræ˜¯æœåŠ¡ç«¯ï¼Œç”¨æ¥å°†å˜åŒ–çš„ js æ¨¡å—é€šè¿‡ websocket çš„æ¶ˆæ¯é€šçŸ¥ç»™æµè§ˆå™¨ç«¯ã€‚ HMR Runtimeæ˜¯æµè§ˆå™¨ç«¯ï¼Œç”¨äºŽæŽ¥å— HMR Server ä¼ é€’çš„æ¨¡å—æ•°æ®ï¼Œæµè§ˆå™¨ç«¯å¯ä»¥çœ‹åˆ° .hot-update.json çš„æ–‡ä»¶ã€‚ çƒ­æ›´æ–°åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š å¯åŠ¨é˜¶æ®µï¼š å¯åŠ¨é˜¶æ®µå°±æ˜¯åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå°†åˆå§‹ä»£ç é€šè¿‡Webpack Compileræ‰“åŒ…ï¼Œå¹¶å°†æ‰“åŒ…å¥½çš„ä»£ç ï¼Œä¼ è¾“ç»™Bundle Serverã€‚Bundle Serverå…¶å®žå°±æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œé€šè¿‡Bundle Serverï¼Œæµè§ˆå™¨å°±èƒ½è®¿é—®åˆ°æ‰“åŒ…å¥½çš„æ–‡ä»¶ã€‚è¿™ä¸ªè¿‡ç¨‹å³å›¾ä¸Šçš„ 1 -&gt; 2 -&gt; A -&gt; B æ›´æ–°é˜¶æ®µï¼š å¦‚æžœæ–‡ä»¶ç³»ç»Ÿä¸­çš„ä»£ç å‘ç”Ÿäº†æ”¹å˜ï¼Œä»£ç è¿˜æ˜¯ä¼šç»è¿‡Webpack Compileræ‰“åŒ…ï¼Œæ‰“åŒ…å¥½äº†ä¼šæŠŠä»£ç å‘é€ç»™HMR Serverï¼ŒHMR Serverä¸­èƒ½å¤Ÿå¯¹æ¯”å¾—åˆ°å…·ä½“æ˜¯å“ªäº›æ–‡ä»¶å‘ç”Ÿäº†æ”¹å˜ã€‚æŽ¥ç€HMR Serverå°±ä¼šé€šçŸ¥HMR Runtimeï¼ŒHMR Runtimeå°±ä¼šæ›´æ–°ä»£ç ï¼Œæœ€ç»ˆå°±å¯ä»¥ä¸éœ€è¦åˆ·æ–°æµè§ˆå™¨å°±çœ‹åˆ°æœ€æ–°çš„ä»£ç ã€‚å³å›¾ä¸Šçš„ 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5]]></content>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨webpackè§£æžä¸€äº›å¸¸è§èµ„æº]]></title>
    <url>%2F2019%2F11%2F17%2F%E4%BD%BF%E7%94%A8webpack%E8%A7%A3%E6%9E%90%E4%B8%80%E4%BA%9B%E5%B8%B8%E8%A7%81%E8%B5%84%E6%BA%90%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨webpackè§£æžES6ã€JSXã€CSSç­‰èµ„æº è§£æžES6 è§£æžes6éœ€è¦ä½¿ç”¨åˆ°babelï¼ŒåŒæ—¶éœ€è¦ä½¿ç”¨babel-loader é¦–å…ˆï¼Œå…ˆé…ç½®babelé…ç½®æ–‡ä»¶.babelrcï¼š 1234567// .babelrc&#123; "presets": [ "@babel/preset-env" // å¢žåŠ ES6çš„babel preseté…ç½® ], "plugins": []&#125; .babelrcæ–‡ä»¶ä¸­çš„pluginså­—æ®µï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªpluginå¯¹åº”ä¸€ä¸ªåŠŸèƒ½ï¼Œ è€Œpresetsåˆ™æ˜¯å¤šä¸ªpluginçš„é›†åˆ æŽ¥ç€éœ€è¦åœ¨webpack.config.jsä¸­å¢žåŠ ç›¸å…³loaderçš„é…ç½®ï¼š 12345678910111213// webpack.config.jsmodule.exports = &#123; // ... module: &#123; rules: [ &#123; test: /\.js$/, use: 'babel-loader' &#125; ] &#125;, // ...&#125; ç„¶åŽå®‰è£…ç›¸å…³ä¾èµ–ï¼š 1npm i @babel/core @babel/preset-env babel-loader -D å®‰è£…å®Œæ¯•é‡æ–°ç¼–è¯‘ä¸‹å³å¯ã€‚ è§£æžReact JSX é¦–å…ˆï¼Œå…ˆé…ç½®babelé…ç½®æ–‡ä»¶.babelrcï¼š 12345678// .babelrc&#123; "presets": [ "@babel/preset-env", "@babel/preset-react" // å¢žåŠ react jsxçš„babel preseté…ç½® ], "plugins": []&#125; æŽ¥ç€åœ¨webpack.config.jsä¸­ä¿®æ”¹babel-loaderçš„æ ¡éªŒè§„åˆ™ï¼š 12345678910111213// webpack.config.jsmodule.exports = &#123; // ... module: &#123; rules: [ &#123; test: /\.jsx?$/, // jsã€jsxæ–‡ä»¶ use: 'babel-loader' &#125; ] &#125;, // ...&#125; ç„¶åŽå®‰è£…ç›¸å…³ä¾èµ–ï¼š 1npm i @babel/preset-react -D å®‰è£…å®Œæ¯•å³å¯ä½¿ç”¨reactçš„jsxç›¸å…³è¯­æ³•ã€‚ è§£æžCSS è§£æžCSSéœ€è¦ç”¨åˆ°ä¸¤ä¸ªloaderï¼š css-loaderåŠ è½½cssæ–‡ä»¶ï¼Œå¹¶è½¬æ¢ä¸ºcommonJSå¯¹è±¡ style-loaderå°†æ ·å¼é€šè¿‡&lt;style&gt;æ ‡ç­¾æ’å…¥åˆ°headä¸­ åœ¨webpack.config.jsä¸­ä¿®æ”¹loaderé…ç½®ï¼š 12345678910111213// webpack.config.jsmodule.exports = &#123; // ... module: &#123; rules: [ &#123; test: /\.css$/, use: ['style-loader', 'css-loader'] &#125; ] &#125;, // ...&#125; éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œloadersé“¾å¼è°ƒç”¨ï¼Œä»Žå³åˆ°å·¦ï¼Œæ‰€ä»¥å…ˆå†™style-loaderï¼Œå†å†™css-loader ç„¶åŽå®‰è£…ç›¸å…³ä¾èµ–ï¼š 1npm i style-loader css-loader -D è§£æžLessã€Sass Lesså’ŒSassçš„è§£æžæ­¥éª¤ä¸ŽCSSç±»ä¼¼ï¼Œåªéœ€è¦å¤šä¸€æ­¥å°†Less/Sassè½¬æ¢ä¸ºCSSå³å¯ã€‚ é…ç½®å¦‚ä¸‹ï¼š 1234567891011121314151617// webpack.config.jsmodule.exports = &#123; // ... module: &#123; rules: [ &#123; test: /\.less$/, use: ['style-loader', 'css-loader', 'less-loader'] &#125;, &#123; test: /\.s[ac]ss$/, // sasså’Œscssæ–‡ä»¶ use: ['style-loader', 'css-loader', 'sass-loader'] &#125; ] &#125;, // ...&#125; æ³¨æ„ï¼Œless-loaderéœ€è¦ä¸€åŒå®‰è£…lessï¼›sass-loaderéœ€è¦ä¸€åŒå®‰è£…node-sass è§£æžå›¾ç‰‡ã€å­—ä½“ç­‰ è§£æžå›¾ç‰‡ã€å­—ä½“ç­‰æ–‡ä»¶ï¼Œå¯ä½¿ç”¨file-loaderæˆ–url-loaderã€‚ url-loaderåº•å±‚ä¹Ÿæ˜¯è°ƒç”¨çš„file-loaderã€‚ åœ¨ä½¿ç”¨ä¸Šï¼Œurl-loaderå¯ä»¥å°†å°èµ„æºä»¥Base64çš„æ–¹å¼ç¼–ç åˆ°æ–‡ä»¶ä¸­ï¼Œå‡å°‘æ–‡ä»¶æ•°ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718// webpack.config.jsmodule.exports = &#123; // ... module: &#123; rules: [ &#123; test: /\.(png|jpg|ttf)$/, use: [&#123; loader: 'url-loader', options: &#123; limit: 10240 // = 10KB &#125; &#125;] &#125; ] &#125;, // ...&#125;]]></content>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[webpackçš„å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µ]]></title>
    <url>%2F2019%2F11%2F17%2Fwebpack%E7%9A%84%E5%87%A0%E4%B8%AA%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯webpack webpackæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ‰“åŒ…å·¥å…·ï¼Œå®ƒä¼šæ ¹æ®ä»£ç çš„å†…å®¹è§£æžæ¨¡å—ä¾èµ–ï¼Œå¸®åŠ©æˆ‘ä»¬æŠŠå¤šä¸ªæ¨¡å—çš„ä»£ç æ‰“åŒ…ã€‚ä¸‹é¢æ˜¯webpackå®˜ç½‘ç»™çš„ä¸€ä¸ªè¯´æ˜Žå›¾ã€‚ å¦‚ä¸Šå›¾ï¼Œwebpack ä¼šæŠŠé¡¹ç›®ä¸­ä½¿ç”¨åˆ°çš„å¤šä¸ªä»£ç æ¨¡å—ï¼ˆå¯ä»¥æ˜¯ä¸åŒæ–‡ä»¶ç±»åž‹ï¼‰ï¼Œæ‰“åŒ…æž„å»ºæˆé¡¹ç›®è¿è¡Œä»…éœ€è¦çš„å‡ ä¸ªé™æ€æ–‡ä»¶ï¼ˆå¦‚.jsã€.cssç­‰ï¼‰ã€‚ webpack å®‰è£… webpackæ”¯æŒä½¿ç”¨npmæˆ–è€…yarnæ–¹å¼è¿›è¡Œå®‰è£…ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªå…¨å±€çš„å‘½ä»¤æ¥ä½¿ç”¨ã€‚ 123npm install webpack webpack-cli -g # æˆ–è€…yarn global add webpack webpack-cli webpackçš„å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µ webpackçš„é…ç½®æ–‡ä»¶é€šå¸¸ä¸ºwebpack.config.jsï¼Œæ”¾ç½®äºŽé¡¹ç›®çš„æ ¹ç›®å½•ä¸­ã€‚æ­¤å¤–ï¼Œä¹Ÿèƒ½å¤Ÿä½¿ç”¨webpack --configæ¥æŒ‡å®šä½¿ç”¨çš„é…ç½®æ–‡ä»¶ã€‚ ä¸€ä¸ªç®€å•çš„é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š 123456789101112131415// webpack.config.jsconst path = requore('path')module.exports = &#123; entry: './src/index.js', // æŒ‡å®šå…¥å£æ–‡ä»¶ output: &#123; // æŒ‡å®šè¾“å‡ºæ–‡ä»¶ path: path.resolve(__dirname, '/dist'), filename: 'bundle.js' &#125;, mode: 'development', // æŒ‡å®šæž„å»ºçŽ¯å¢ƒ module: &#123; rules: [] // é…ç½®loaders &#125;, plugins: [] // é…ç½®plugins&#125; Â¶entry entry ç”¨äºŽæŒ‡å®šæ‰“åŒ…å…¥å£ã€‚ç›®å‰å…¥å£æ–‡ä»¶åªæ”¯æŒjsï¼Œå…¶å®ƒçš„å¦‚htmlå’Œcsséƒ½ä¸æ”¯æŒã€‚ webpackä¼šæŠŠjsã€cssã€å›¾ç‰‡ç­‰ç­‰å½“æˆä¸€ä¸ªä¸ªæ¨¡å—ï¼Œå„æ¨¡å—é—´ä¼šå­˜åœ¨ä¸€ç³»åˆ—çš„ä¾èµ–å…³ç³»ï¼Œåœ¨webpacké‡Œé¢ï¼Œä¼šæ ¹æ®entryæŒ‡å®šçš„æ–‡ä»¶ï¼Œæ‰¾åˆ°ä¾èµ–ï¼Œentryæ–‡ä»¶çš„ä¾èµ–ä¹Ÿå¯èƒ½ä¼šä»¥æ¥å…¶ä»–æ¨¡å—ï¼Œè¿™æ ·å°±ä¼šç”Ÿæˆä¸€æ£µä¾èµ–æ ‘ã€‚webpackä¼šéåŽ†è¿™è¯¾ä¾èµ–æ ‘ï¼ŒéåŽ†å®Œäº†æ‰ä¼šç”Ÿæˆæ‰“åŒ…èµ„æºã€‚ entryå¯ä»¥æŒ‡å®šå•å…¥å£ä¸Žå¤šå…¥å£ã€‚ Â¶å•å…¥å£ å•å…¥å£é€‚ç”¨äºŽå•é¡µåº”ç”¨ï¼Œå…¶ä½¿ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æ¥ç»™å®šå…¥å£æ–‡ä»¶çš„åœ°å€ï¼Œå¦‚ä¸‹ï¼š 1entry: &apos;./src/index.js&apos; Â¶å¤šå…¥å£ å¤šå…¥å£é€‚ç”¨äºŽå¤šé¡µåº”ç”¨ï¼Œå…¶ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡æ¥ç»™å®šå…¥å£æ–‡ä»¶çš„åœ°å€ï¼Œè¯¥å¯¹è±¡ä¸ºé”®å€¼å¯¹çš„å½¢å¼ï¼Œé”®ä¸ºå…¥å£æ¨¡å—çš„åå­—ï¼Œå€¼ä¸ºæ–‡ä»¶åœ°å€å¦‚ä¸‹ï¼š 12345entry: &#123; app: &apos;./src/app.js&apos;, search: &apos;./src/search.js&apos; // ...&#125; Â¶output output æŒ‡å®šç¼–è¯‘åŽçš„æ–‡ä»¶å¦‚ä½•è¾“å‡ºåˆ°ç£ç›˜ï¼Œæ³¨æ„ï¼Œå³ä½¿å¯ä»¥å­˜åœ¨å¤šä¸ªentryèµ·ç‚¹ï¼Œä½†åªèƒ½æŒ‡å®šä¸€ä¸ªoutputé…ç½®ã€‚ outputçš„å€¼å¿…é¡»ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”åŒ…å«ä»¥ä¸‹ä¸¤ä¸ªå±žæ€§ï¼š filename ç”¨äºŽè¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶åã€‚ path ç”¨äºŽæŒ‡å®šç›®æ ‡è¾“å‡ºæ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚ ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345output: &#123; filename: &apos;bundle.js&apos;, path: path.resolve(__dirname, &apos;dist&apos;)&#125;// æ­¤é…ç½®å°†ç”Ÿæˆä¸€ä¸ªå•ç‹¬çš„ bundle.js æ–‡ä»¶è¾“å‡ºåˆ°é¡¹ç›®çš„ /dist ç›®å½•ä¸­ã€‚ ä»¥ä¸Šç¤ºä¾‹æ˜¯é’ˆå¯¹å•å…¥å£çš„é…ç½®ã€‚å¦‚æžœæ˜¯å¤šå…¥å£ï¼Œå¯ä»¥ä½¿ç”¨å ä½ç¬¦[name]æ¥ç¡®ä¿æ¯ä¸ªæ–‡ä»¶å…·æœ‰å”¯ä¸€çš„åç§°ã€‚ 123456789entry: &#123; app: &apos;./src/app.js&apos;, search: &apos;./src/search.js&apos;&#125;,output: &#123; filename: &apos;[name].js&apos;, path: path.resolve(__dirname, &apos;dist&apos;)&#125;// æ­¤é…ç½®å°†ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ ./dist/app.js, ./dist/search.jsã€‚ Â¶loaders webpackåŽŸç”Ÿåªæ”¯æŒjså’Œjsonï¼Œé€šè¿‡loadersåŽ»æ”¯æŒå…¶ä»–æ–‡ä»¶ç±»åž‹ï¼Œå¦‚cssï¼Œå¹¶æŠŠä»–ä»¬è½¬åŒ–ä¸ºæœ‰æ•ˆæ¨¡å—ï¼Œå¹¶å¯ä»¥æ·»åŠ åˆ°ä¾èµ–å›¾ä¸­ã€‚ loaderæœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŽ¥å—æºæ–‡ä»¶ä¸ºå‚æ•°ï¼Œè¿”å›žè½¬æ¢åŽçš„ç»“æžœã€‚ Â¶å¸¸è§çš„loader åç§° ç”¨å¤„ babel-loader è½¬æ¢ES6/ES7ç­‰JSæ–°ç‰¹æ€§è¯­æ³• css-loader æ”¯æŒ.cssçš„è§£æžå’ŒåŠ è½½ less-loader å°†lessè½¬æ¢ä¸ºcss ts-loader å°†TSè½¬æ¢ä¸ºJS Â¶ç”¨æ³• 123456module: &#123; rules: [ // å°†éœ€è¦çš„loaderæ”¾åœ¨moduleå¯¹è±¡çš„rulesæ•°ç»„ä¸­ &apos;bable-loader&apos;, // å¯ä»¥ç›´æŽ¥ä½¿ç”¨loaderåç§° &#123; test: /\.txt$/, use: &apos;raw-loader&apos; &#125;, // test - æŒ‡å®šåŒ¹é…è§„åˆ™ï¼Œuse - æŒ‡å®šä½¿ç”¨çš„loaderåç§° ]&#125; Â¶plugins pluginç”¨äºŽbundleæ–‡ä»¶çš„ä¼˜åŒ–ï¼Œèµ„æºç®¡ç†å’ŒçŽ¯å¢ƒå˜é‡çš„å¼•å…¥ï¼Œä½œç”¨äºŽæ•´ä¸ªæž„å»ºè¿‡ç¨‹ Â¶å¸¸è§çš„plugin åç§° ç”¨å¤„ cleanWebpackPlugin æ¸…ç†æž„å»ºç›®å½• miniCssExtractPlugin å°†CSSä»Žbundleé‡Œæå–æˆä¸€ä¸ªç‹¬ç«‹çš„cssæ–‡ä»¶ htmlWebpackPlugin åˆ›å»ºhtmlæ–‡ä»¶ uglifyjsWebpackPlugin åŽ‹ç¼©js Â¶ç”¨æ³• 123plugins: [ // å°†ä½¿ç”¨çš„pluginæ”¾åˆ°pluginsæ•°ç»„ä¸­ new HtmlWebpackPlugin(&#123; template: &apos;./src/index.html&apos; &#125;)] Â¶mode modeç”¨äºŽæŒ‡å®šå½“å‰æž„å»ºçŽ¯å¢ƒï¼Œå¯å–å€¼ä¸ºï¼šdevelopment / production / none è®¾ç½®modeå¯ä»¥ä½¿ç”¨webpackçš„ä¸€äº›å†…ç½®å‡½æ•°ã€‚ é€‰é¡¹ æè¿° development è®¾ç½®process.env.NODE_ENVçš„å€¼ä¸ºdevelopmentï¼Œå¼€å¯NamedChunksPluginå’ŒNamedModulesPlugin production è®¾ç½®process.env.NODE_ENVçš„å€¼ä¸ºproductionï¼Œå¼€å¯FlagDependencyUsagePluginï¼ŒFlagIncludedChunksPluginï¼ŒModuleConcatenationPluginï¼ŒNoEmitOnErrorPluginï¼ŒOccurrenceOrderPluginï¼ŒSideEffectsFlagPluginï¼ŒTerserPlugin none ä¸å¼€å¯ä»»ä½•ä¼˜åŒ–é€‰é¡¹ å…³äºŽpath.resolve([â€¦paths]) å°†è·¯å¾„æˆ–è·¯å¾„ç‰‡æ®µå¤„ç†æˆç»å¯¹è·¯å¾„ã€‚ path ä»Žå³åˆ°å·¦ä¾æ¬¡å¤„ç†ï¼Œç›´åˆ°æž„é€ å‡ºç»å¯¹è·¯å¾„ã€‚ ä¾‹å¦‚ï¼ŒæŒ‡å®šçš„è·¯å¾„ç‰‡æ®µæ˜¯ï¼š/fooã€/barã€bazï¼Œåˆ™è°ƒç”¨ path.resolve('/foo', '/bar', 'baz') ä¼šè¿”å›ž /bar/bazã€‚ å¦‚æžœå¤„ç†å®Œå…¨éƒ¨ path ç‰‡æ®µåŽè¿˜æœªäº§ç”Ÿç»å¯¹è·¯å¾„ï¼Œåˆ™åŠ ä¸Šå½“å‰å·¥ä½œç›®å½•ã€‚ ç”Ÿæˆçš„è·¯å¾„ä¼šè¿›è¡Œè§„èŒƒåŒ–ï¼Œå¹¶ä¸”åˆ é™¤æœ«å°¾çš„æ–œæ ï¼Œé™¤éžè·¯å¾„æ˜¯æ ¹ç›®å½•ã€‚ ç©ºå­—ç¬¦ä¸²çš„ path ç‰‡æ®µä¼šè¢«å¿½ç•¥ã€‚ å¦‚æžœæ²¡æœ‰æŒ‡å®š pathï¼Œåˆ™è¿”å›žå½“å‰å·¥ä½œç›®å½•çš„ç»å¯¹è·¯å¾„ã€‚ Node.js ä¸­ï¼Œ__dirnameæ€»æ˜¯æŒ‡å‘è¢«æ‰§è¡Œ js æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œæ‰€ä»¥å½“åœ¨ /d1/d2/myscript.js æ–‡ä»¶ä¸­å†™äº† __dirnameï¼Œ å®ƒçš„å€¼å°±æ˜¯ /d1/d2 ã€‚]]></content>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeetCodeé¢˜è§£|28. å®žçŽ°strStr()]]></title>
    <url>%2F2019%2F09%2F08%2FLeetCode%E9%A2%98%E8%A7%A3-28-%E5%AE%9E%E7%8E%B0strStr%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®é“¾æŽ¥ï¼š28. å®žçŽ°strStr() æ¦‚è¿° ç»™å®šä¸€ä¸ªhaystackå­—ç¬¦ä¸²å’Œä¸€ä¸ªneedleå­—ç¬¦ä¸²ï¼Œåœ¨haystackå­—ç¬¦ä¸²ä¸­æ‰¾å‡ºneedleå­—ç¬¦ä¸²å‡ºçŽ°çš„ç¬¬ä¸€ä¸ªä½ç½® (ä»Ž0å¼€å§‹)ã€‚å¦‚æžœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›ž-1ã€‚ æ€è·¯ å­—ç¬¦ä¸²åŒ¹é…ï¼Œæœ‰è¿™ä¹ˆå‡ ç§æ–¹æ³•ï¼šBFç®—æ³•ã€RKç®—æ³•ã€BMç®—æ³•ã€KMPç®—æ³• æœ¬æ–‡ä½¿ç”¨äº†æœ€ç®€å•çš„BFç®—æ³•ï¼Œå‡»è´¥äº†90.34%çš„JavaScriptæäº¤è®°å½•ã€‚ å®žçŽ° 123456789101112131415161718/** * @param &#123;string&#125; haystack * @param &#123;string&#125; needle * @return &#123;number&#125; */var strStr = function(haystack, needle) &#123; if (needle === '' || needle === haystack) &#123; return 0 &#125; const needleLen = needle.length const hayLen = haystack.length for (let i = 0; i &lt;= hayLen - needleLen; i++) &#123; if (haystack.slice(i, needleLen + i) === needle) &#123; return i &#125; &#125; return -1&#125;; é¢˜è§£åˆé›†]]></content>
      <tags>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeetCodeé¢˜è§£|27. ç§»é™¤å…ƒç´ ]]></title>
    <url>%2F2019%2F09%2F08%2FLeetCode%E9%A2%98%E8%A7%A3-27-%E7%A7%BB%E9%99%A4%E5%85%83%E7%B4%A0%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®é“¾æŽ¥ï¼š27. ç§»é™¤å…ƒç´  æ¦‚è¿° ç»™å®šä¸€ä¸ªæ•°ç»„ nums å’Œä¸€ä¸ªå€¼ valï¼Œä½ éœ€è¦åŽŸåœ°ç§»é™¤æ‰€æœ‰æ•°å€¼ç­‰äºŽ val çš„å…ƒç´ ï¼Œè¿”å›žç§»é™¤åŽæ•°ç»„çš„æ–°é•¿åº¦ã€‚ æ€è·¯ è§£æ³•ä¸ŽLeetCodeé¢˜è§£|26. åˆ é™¤æŽ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ç±»ä¼¼ã€‚ ä½¿ç”¨åŒæŒ‡é’ˆp1ã€p2ï¼Œå…¶ä¸­p1æ˜¯æ…¢æŒ‡é’ˆã€p2æ˜¯å¿«æŒ‡é’ˆã€‚ å¦‚æžœval === nums[p2]ï¼Œæˆ‘ä»¬å°±å¢žåŠ p2è·³è¿‡è¿™ä¸ªç›®æ ‡å€¼ å¦‚æžœval !== nums[p2]ï¼Œè¯´æ˜Žå·²ç»è·³è¿‡äº†æ‰€æœ‰ç›®æ ‡å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠnums[p2]çš„å€¼å¤åˆ¶åˆ°nums[p1]ä¸­ï¼Œå¹¶æŠŠp1å¾€åŽç§»åŠ¨ã€‚ ç›´åˆ°p2 === nums.lengthæ—¶ï¼Œç®—æ³•ç»“æŸã€‚ å®žçŽ° 123456789101112131415/** * @param &#123;number[]&#125; nums * @param &#123;number&#125; val * @return &#123;number&#125; */var removeElement = function(nums, val) &#123; let p1 = 0 for (let p2 = 0; p2 &lt; nums.length; p2++) &#123; if (val !== nums[p2]) &#123; nums[p1] = nums[p2] p1++ &#125; &#125; return p1&#125;; é¢˜è§£åˆé›†]]></content>
      <tags>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeetCodeé¢˜è§£|26. åˆ é™¤æŽ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹]]></title>
    <url>%2F2019%2F09%2F08%2FLeetCode%E9%A2%98%E8%A7%A3-26-%E5%88%A0%E9%99%A4%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E9%87%8D%E5%A4%8D%E9%A1%B9%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®é“¾æŽ¥ï¼š26. åˆ é™¤æŽ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ æ¦‚è¿° é¢˜ç›®ç»™å®šä¸€ä¸ªæŽ’åºæ•°ç»„ï¼Œéœ€è¦åœ¨åŽŸåœ°åˆ é™¤é‡å¤å‡ºçŽ°çš„å…ƒç´ ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ åªå‡ºçŽ°ä¸€æ¬¡ï¼Œè¿”å›žç§»é™¤åŽæ•°ç»„çš„æ–°é•¿åº¦ã€‚ æ€è·¯ ä½¿ç”¨åŒæŒ‡é’ˆp1ã€p2ï¼Œå…¶ä¸­p1æ˜¯æ…¢æŒ‡é’ˆã€p2æ˜¯å¿«æŒ‡é’ˆã€‚ å¦‚æžœnums[p1] === nums[p2]ï¼Œæˆ‘ä»¬å°±å¢žåŠ p2è·³è¿‡é‡å¤é¡¹ å¦‚æžœnums[p1] !== nums[p2]ï¼Œè¯´æ˜Žå·²ç»è·³è¿‡äº†æ‰€æœ‰é‡å¤é¡¹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠnums[p2]çš„å€¼å¤åˆ¶åˆ°nums[p1 + 1]ä¸­ï¼Œå¹¶æŠŠp1å¾€åŽç§»åŠ¨ã€‚ ç›´åˆ°p2 === nums.lengthæ—¶ï¼Œç®—æ³•ç»“æŸã€‚ å› ä¸ºp1æŒ‡å‘çš„æ˜¯ä¸é‡å¤é¡¹çš„æœ€åŽä¸€ä¸ªï¼Œå› æ­¤ï¼Œæœ€ç»ˆçš„æ•°ç»„é•¿åº¦å°±æ˜¯p1 + 1ã€‚ å®žçŽ° 1234567891011121314151617/** * @param &#123;number[]&#125; nums * @return &#123;number&#125; */var removeDuplicates = function(nums) &#123; if (nums.length &lt; 2) &#123; return nums.length &#125; let p1 = 0 for (let p2 = 0; p2 &lt; nums.length; p2++) &#123; if (nums[p1] !== nums[p2]) &#123; p1++ nums[p1] = nums[p2] &#125; &#125; return p1 + 1&#125;; é¢˜è§£åˆé›†]]></content>
      <tags>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jsä¸­çš„å‡ ç§forå¾ªçŽ¯]]></title>
    <url>%2F2019%2F09%2F03%2Fjs%E4%B8%AD%E7%9A%84%E5%87%A0%E7%A7%8Dfor%E5%BE%AA%E7%8E%AF%2F</url>
    <content type="text"><![CDATA[åœ¨JSåˆšå‡ºæ¥çš„æ—¶å€™ï¼Œæƒ³è¦éåŽ†ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·ï¼š 123for (var i = 0; i &lt; array.length; i++) &#123; conosole.log(array[i])&#125; forEach åœ¨ES5ä¹‹åŽï¼Œæ–°åŠ äº†ä¸€ä¸ªforEachæ–¹æ³•ï¼š 123array.forEach(function (item) &#123; console.log(item)&#125;) forEachçš„å†™æ³•æ¯”åŽŸæ¥çš„forå¾ªçŽ¯ç®€æ´ï¼Œä½†æ˜¯åœ¨å…¶å†…éƒ¨ï¼Œå´ä¸èƒ½ä½¿ç”¨breakå’Œreturnç»“æŸå¾ªçŽ¯ä»¥åŠcontinueè·³è¿‡å¾ªçŽ¯ï¼Œæ¯”å¦‚ï¼š 1234567[1, 2, 3].forEach(function(item)&#123; if(item === 2)&#123; return // ä½¿ç”¨ break åŠ continue å‡ä¼šæŠ¥é”™ &#125; console.log(item) // 1 3&#125;) forâ€¦in ES5ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªfor...inå¾ªçŽ¯ï¼Œå…¶ç”¨æ³•å¦‚ä¸‹ï¼š 123for (var index in array) &#123; console.log(array[index])&#125; ä½†æ˜¯ï¼Œfor...inæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š æžšä¸¾çš„ç´¢å¼•indexæ˜¯å­—ç¬¦åž‹ï¼Œä¸èƒ½ç›´æŽ¥è¿›è¡Œæ•°å­—è¿ç®—ï¼Œå¦‚ï¼š 12345var sum = 0for (var index in [1, 2, 3]) &#123; sum += index&#125;console.log(sum) // '0012', è€Œä¸æ˜¯ 3 ä¼šå°†åŽŸåž‹å¯¹è±¡ä¹Ÿä¸€èµ·æžšä¸¾å‡ºæ¥ï¼Œå¦‚ï¼š 12345678910111213141516Object.prototype.objCustom = function() &#123;&#125;; Array.prototype.arrCustom = function() &#123;&#125;;var arr = [3, 5, 7];arr.foo = 'bar';for (var i in arr) &#123; console.log(i);&#125;// è¾“å‡ºï¼š// 0// 1// 2// foo// arrCustom// objCustom å¦‚æžœä¸æƒ³æžšä¸¾å‡ºåŽŸåž‹å¯¹è±¡ï¼Œå¯ä»¥é…åˆä½¿ç”¨hasOwnPropertyï¼š 12345678910111213141516Object.prototype.objCustom = function() &#123;&#125;; Array.prototype.arrCustom = function() &#123;&#125;;var arr = [3, 5, 7];arr.foo = 'bar';for (var i in arr) &#123; if (arr.hasOwnProperty(i)) &#123; console.log(i) &#125;&#125;// è¾“å‡ºï¼š// 0// 1// 2// foo å¾ªçŽ¯å‡ºæ¥çš„å±žæ€§é¡ºåºå¦‚ä¸‹ï¼šå…ˆéåŽ†å‡ºæ•´æ•°å±žæ€§ï¼ˆinteger propertiesï¼ŒæŒ‰ç…§å‡åºï¼‰ï¼Œç„¶åŽå…¶ä»–å±žæ€§æŒ‰ç…§åˆ›å»ºæ—¶å€™çš„é¡ºåºéåŽ†å‡ºæ¥ã€‚ æ•´æ•°å±žæ€§æ»¡è¶³ String(Math.trunc(Number(prop)) === prop å¦‚ &quot;49&quot; æ˜¯æ•´æ•°å±žæ€§ï¼Œå› ä¸º String(Math.trunc(Number('49')) çš„ç»“æžœè¿˜æ˜¯ â€œ49â€ã€‚ &quot;+49&quot; ä¸æ˜¯æ•´æ•°å±žæ€§ï¼Œå› ä¸º String(Math.trunc(Number('+49')) çš„ç»“æžœæ˜¯ â€œ49â€ï¼Œä¸æ˜¯ â€œ+49â€ã€‚ â€œ1.2â€ ä¸æ˜¯æ•´æ•°å±žæ€§ï¼Œå› ä¸º String(Math.trunc(Number('1.2')) çš„ç»“æžœæ˜¯ â€œ1â€ï¼Œä¸æ˜¯ â€œ1.2â€ã€‚ æ¯”å¦‚ï¼š 12345678910var codes = &#123; "49": "Germany", "41": "Switzerland", "44": "Great Britain", "1": "USA"&#125;for(var code in codes) &#123; console.log(code) // 1, 41, 44, 49&#125; forâ€¦of åœ¨ES6ä¸­ï¼Œæ–°åŠ äº†ä¸€ä¸ªfor...ofå¾ªçŽ¯ï¼Œå…¶ç”¨æ³•å¦‚ä¸‹ï¼š 123for (var value of array) &#123; console.log(value)&#125; ä¸Žå‰é¢å‡ ç§æ–¹å¼æ¯”è¾ƒï¼Œfor...ofæ˜¯å¾ªçŽ¯æ•°ç»„å…ƒç´ æœ€ç®€æ´çš„æ–¹æ³•ï¼Œé¿å…äº†for...inçš„å‡ ä¸ªä¸è¶³ï¼ŒåŒæ—¶ä¹Ÿèƒ½å¤Ÿä½¿ç”¨returnã€breakã€continue for...ofèƒ½å¤Ÿä½¿ç”¨çš„èŒƒå›´åŒ…æ‹¬äº†æ•°ç»„ã€Setã€Mapã€å­—ç¬¦ä¸²ã€ç±»æ•°ç»„å¯¹è±¡ï¼ˆå¦‚argumentsã€DOM NodeListå¯¹è±¡ï¼‰ã€ Generatorå¯¹è±¡ã€‚ Â¶æ•°ç»„ for...ofèƒ½å¤Ÿç›´æŽ¥ä½¿ç”¨åœ¨æ•°ç»„ä¸Šï¼Œå…¶éåŽ†å¾—åˆ°çš„æ˜¯é”®å€¼ï¼Œè€Œä¸åƒfor...inä¸€æ ·å¾—åˆ°çš„æ˜¯é”®åï¼š 123456789var arr = ['a', 'b', 'c', 'd']for (var index in arr) &#123; console.log(index) // 0 1 2 3&#125;for (var value of arr) &#123; console.log(value) // a b c d&#125; åŒæ—¶ï¼Œfor...ofåªä¼šéåŽ†æ•°ç»„çš„æ•°å­—ç´¢å¼•çš„å±žæ€§ï¼Œè€Œfor...inä¼šéåŽ†æ‰€æœ‰å±žæ€§ï¼š 12345678910var arr = [3, 5, 7]arr.foo = 'bar'for (var index in arr) &#123; console.log(index) // "0", "1", "2", "foo"&#125;for (var value of arr) &#123; console.log(value) // "3", "5", "7"&#125; Â¶Setã€Map Setã€Mapåœ¨ä½¿ç”¨for...ofè¿›è¡ŒéåŽ†çš„æ—¶å€™ï¼Œé¡ºåºæ˜¯æŒ‰ç…§å„ä¸ªæˆå‘˜æ·»åŠ åˆ°æ•°æ®ç»“æž„ä¸­çš„é¡ºåºã€‚å¦å¤–ï¼ŒSet éåŽ†æ—¶ï¼Œè¿”å›žçš„æ˜¯ä¸€ä¸ªå€¼ï¼Œè€Œ Map éåŽ†æ—¶ï¼Œè¿”å›žçš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„çš„ä¸¤ä¸ªæˆå‘˜åˆ†åˆ«ä¸ºå½“å‰ Map æˆå‘˜çš„é”®åå’Œé”®å€¼ã€‚ 12345678910111213141516171819202122232425var engines = new Set(["Gecko", "Trident", "Webkit", "Webkit"])for (var e of engines) &#123; console.log(e)&#125;// Gecko// Trident// Webkitvar es6 = new Map()es6.set("edition", 6)es6.set("committee", "TC39")es6.set("standard", "ECMA-262")for (var [name, value] of es6) &#123; console.log(name + ": " + value)&#125;// edition: 6// committee: TC39// standard: ECMA-262for (var pair of es6) &#123; console.log(pair)&#125;// ['edition', 6]// ['committee', TC39]// ['standard', ECMA-262] Â¶å­—ç¬¦ä¸² åœ¨ä½¿ç”¨for...oféåŽ†å­—ç¬¦ä¸²æ—¶ï¼Œè¿˜èƒ½å¤Ÿæ­£ç¡®çš„è¯†åˆ«Unicodeç¼–ç ï¼š 123456for (var chr of "ðŸ˜ºðŸ˜²") &#123; console.log(chr) // ðŸ˜º, ðŸ˜²&#125;for (var chr in "ðŸ˜ºðŸ˜²") &#123; console.log(chr) // '0', '1', '2', '3' &lt;--- å°†2ä¸ªUnicodeå­—ç¬¦è¯†åˆ«æˆäº†4ä¸ªå­—ç¬¦&#125; Â¶ç±»æ•°ç»„å¯¹è±¡ ç±»æ•°ç»„å¯¹è±¡çš„éåŽ†æ–¹æ³•ä¹Ÿå’Œæ•°ç»„ä¸€æ ·ï¼š 12345678910111213141516// DOM NodeListå¯¹è±¡let paras = document.querySelectorAll("p");for (let p of paras) &#123; p.classList.add("test");&#125;// argumentså¯¹è±¡function printArgs() &#123; for (let x of arguments) &#123; console.log(x); &#125;&#125;printArgs('a', 'b');// 'a'// 'b' Â¶æ™®é€šå¯¹è±¡ for...ofå¹¶ä¸èƒ½åƒfor...inä¸€æ ·ç›´æŽ¥éåŽ†æ™®é€šå¯¹è±¡ï¼š 1234567891011121314151617var es6 = &#123; edition: 6, committee: "TC39", standard: "ECMA-262"&#125;for (var e in es6) &#123; console.log(e)&#125;// edition// committee// standardfor (var e of es6) &#123; console.log(e)&#125;// TypeError: es6 is not iterable è§£å†³æ–¹æ³•æœ‰ä¸¤ç§ï¼Œä¸€æ˜¯ä½¿ç”¨Object.entries/Object.keys/Object.valuesæ–¹æ³•ç”±æ™®é€šå¯¹è±¡ç”Ÿæˆé”®å€¼å¯¹/é”®å/é”®å€¼æ•°ç»„ï¼Œç„¶åŽéåŽ†è¿™ä¸ªæ•°ç»„ï¼š 12345678910111213141516171819202122232425var es6 = &#123; edition: 6, committee: "TC39", standard: "ECMA-262"&#125;for (var e of Object.entries(es6)) &#123; console.log(e)&#125;// ["edition", 6]// ["committee", "TC39"]// ["standard", "ECMA-262"]for (var e of Object.keys(es6)) &#123; console.log(e + ': ' + es6[e])&#125;// edition: 6// committee: TC39// standard: ECMA-262for (var e of Object.values(es6)) &#123; console.log(e)&#125;// 6// TC39// ECMA-262 å¦ä¸€ç§æ˜¯ä½¿ç”¨Generatorå‡½æ•°å°†å¯¹è±¡åŒ…è£…ä¸€ä¸‹ï¼š 123456789101112function* entries(obj) &#123; for (let key of Object.keys(obj)) &#123; yield [key, obj[key]]; &#125;&#125;for (let [key, value] of entries(obj)) &#123; console.log(key, '-&gt;', value);&#125;// a -&gt; 1// b -&gt; 2// c -&gt; 3 å‚è€ƒ ES6 In Depth: Iterators and the for-of loop Iterator å’Œ forâ€¦of å¾ªçŽ¯ http://javascript.info/object#the-for-in-loop]]></content>
      <tags>
        <tag>javascript</tag>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[arts-week-1]]></title>
    <url>%2F2019%2F09%2F02%2Farts-week-1%2F</url>
    <content type="text"><![CDATA[Algorithm æœ¬å‘¨å®Œæˆäº†LeetCodeçš„ä¸‰é¢˜ç®€å•é¢˜ï¼š # Title Solution Difficulty Tag 26 åˆ é™¤æŽ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ js Easy Array 27 ç§»é™¤å…ƒç´  js Easy Array 28 å®žçŽ°strStr() js Easy String Review æœ¬å‘¨çœ‹äº†ES6 In Depthçš„ç¬¬ä¸€ç¯‡ï¼šIterators and the for-of loop æœ¬æ–‡ä¸»è¦å¯¹æ¯”äº†jsä¸­å‡ ç§forå¾ªçŽ¯å„è‡ªçš„ç‰¹ç‚¹ï¼Œç€é‡ä»‹ç»äº†è¿­ä»£å™¨Iteratorså’Œfor...ofã€‚ åªè¦å®žçŽ°äº†[Symbol.iterator]åŠnext()æ–¹æ³•çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ä½¿ç”¨for...ofè¿›è¡Œè¿­ä»£ã€‚ [Symbol.iterator]æ–¹æ³•è¿”å›žä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œè€Œnext()æ–¹æ³•è¿”å›žä¸€ä¸ªå½¢å¦‚{ done: false, value: 1 }çš„å¯¹è±¡ã€‚ åœ¨ä½¿ç”¨for...ofå¾ªçŽ¯æ—¶ï¼Œé¦–å…ˆä¼šè°ƒç”¨[Symbol.iterator]æ–¹æ³•ï¼Œå¾—åˆ°ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œç„¶åŽä¸æ–­æ‰§è¡Œnext()æ–¹æ³•ï¼Œç›´åˆ°next().done === trueå°±ä¼šåœæ­¢å¾ªçŽ¯ã€‚ Tip javascriptä¸­çš„forã€for...inã€for...ofã€whileã€do...whileå‡ä¸èƒ½ä½¿ç”¨returnè¯­å¥ï¼Œä¼šæŠ¥é”™SyntaxError: Illegal return statementã€‚ gitä¸­ï¼Œå¯ä»¥ä½¿ç”¨git stashå°†ä»£ç å­˜åˆ°æš‚å­˜åŒºä¸­ï¼Œç„¶åŽå°±å¯ä»¥æ”¾å¿ƒçš„åˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯äº†ã€‚ä½¿ç”¨git stash popå¯ä»¥å°†æš‚å­˜åŒºä¸­çš„ä»£ç æ¢å¤ã€‚å‚è§ï¼šè¿™ç¯‡æ–‡ç«  Share æœ¬å‘¨çœ‹äº†jsä¸­çš„å‡ ç§forå¾ªçŽ¯ï¼Œäº†è§£äº†å‡ ç§å¾ªçŽ¯çš„åŒºåˆ«ã€‚]]></content>
      <tags>
        <tag>arts</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeetCodeé¢˜è§£|775. Global and Local Inversions]]></title>
    <url>%2F2019%2F04%2F16%2FLeetCode%E9%A2%98%E8%A7%A3-775-Global-and-Local-Inversions%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®é“¾æŽ¥ï¼š775. Global and Local Inversions æ¦‚è¿° é¢˜ç›®ç»™å®šä¸€ä¸ªé•¿åº¦ä¸ºNçš„æ•°ç»„Aï¼Œä¸º[0, 1, ..., N - 1]çš„ä¸€ç§æŽ’åˆ—ã€‚å…¨å±€å€’ç½®æŒ‡çš„æ˜¯ i,j æ»¡è¶³ 0 &lt;= i &lt; j &lt; N å¹¶ä¸” A[i] &gt; A[j] ï¼Œå±€éƒ¨å€’ç½®æŒ‡çš„æ˜¯iæ»¡è¶³ 0 &lt;= i &lt; N å¹¶ä¸” A[i] &gt; A[i+1] ã€‚é—®è¯¥æ•°ç»„çš„å…¨å±€å€’ç½®æ˜¯å¦ç­‰äºŽå±€éƒ¨å€’ç½®ã€‚ æ€è·¯ è¿™ä¸ªé—®é¢˜æš´åŠ›æ±‚è§£ä¹Ÿå¾ˆå¥½åŠžï¼ŒæŒ‰ç…§é¢˜ç›®è¦æ±‚æ‰«æä¸‹æ•°ç»„å³å¯ã€‚ 12345678910111213141516171819202122/** * @param &#123;number[]&#125; A * @return &#123;boolean&#125; */var isIdealPermutation = function(A) &#123; var local = 0, global = 0; for(let i = 0; i &lt; A.length - 1; i++)&#123; if(A[i] &gt; A[i + 1])&#123; local++; &#125; &#125; for(let i = 0; i &lt; A.length; i++)&#123; for(let j = i + 1; j &lt; A.length; j++)&#123; if(A[i] &gt; A[j])&#123; global++; &#125; &#125; &#125; return global === local;&#125;; è¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n2)ï¼Œåªèƒ½beat 30%ï¼Œæœ‰ç‚¹æ…¢ã€‚è€ƒè™‘ä¸‹ä¼˜åŒ–ã€‚ é¢˜ç›®çš„ä¸¤ä¸ªæ¡ä»¶å¯ä»¥æ€»ç»“ä¸ºï¼š å½“0 &lt;= i &lt; i + k &lt; N å¹¶ä¸” A[i] &gt; A[i + k]æ—¶ï¼Œåˆ™å­˜åœ¨å€’ç½®ã€‚è‹¥k = 1ï¼Œåˆ™ä¸ºlocalï¼Œè‹¥k â‰¥ 1ï¼Œåˆ™ä¸ºglobalã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœå­˜åœ¨k &gt; 1ï¼Œä½¿å¾—A[i] &gt; A[i + k]æˆç«‹ï¼Œåˆ™ global !== localã€‚ æœ€åŽŸå§‹çš„æ•°ç»„ï¼Œä¸º[0, 1, 2, ..., i-1, i, i+1, ..., N-1]ï¼Œå³A[i] = iã€‚ å‡è®¾å­˜åœ¨k &gt; 1ï¼Œä½¿å¾—A[i] &gt; A[i + k]æˆç«‹ï¼Œ åˆ™ A[i] != i ä¸” A[i] &gt; i + 1 æˆ– A[i] &lt; i - 1ï¼Œå³|A[i]-i| &gt; 1ã€‚ å› æ­¤ï¼Œåªè¦éåŽ†ä¸€éæ•°ç»„å³å¯å¾—åˆ°ç­”æ¡ˆã€‚ å®žçŽ° 123456789101112/** * @param &#123;number[]&#125; A * @return &#123;boolean&#125; */var isIdealPermutation = function(A) &#123; for(let i = 0; i &lt; A.length; i++)&#123; if(Math.abs(A[i] - i) &gt; 1)&#123; return false; &#125; &#125; return true;&#125;; é¢˜è§£åˆé›†]]></content>
      <tags>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeetCodeé¢˜è§£|988. Smallest String Starting From Leaf]]></title>
    <url>%2F2019%2F04%2F16%2FLeetCode%E9%A2%98%E8%A7%A3-988-Smallest-String-Starting-From-Leaf%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®é“¾æŽ¥ï¼š988. Smallest String Starting From Leaf æ¦‚è¿° é¢˜ç›®ç»™å®šä¸€æ£µäºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹å€¼ä¸º0åˆ°25çš„å€¼ï¼Œåˆ†åˆ«å¯¹åº”aåˆ°zï¼Œæ±‚æ ‘ä¸­å­—å…¸åºæœ€å°çš„å­—ç¬¦ä¸²ã€‚ æ€è·¯ ä¸€å¼€å§‹æƒ³åˆ°çš„æ–¹æ³•ï¼Œå°±æ˜¯åŽ»æ·±åº¦éåŽ†ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯¹åº”çš„å­—ç¬¦ä¸²ä¸ºmin(å·¦å­æ ‘çš„å­—ç¬¦ä¸² + å½“å‰èŠ‚ç‚¹å€¼, å³å­æ ‘çš„å­—ç¬¦ä¸² + å½“å‰èŠ‚ç‚¹å€¼)ï¼Œ å®žçŽ°ä»£ç å¤§è‡´å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536/** * Definition for a binary tree node. * function TreeNode(val) &#123; * this.val = val; * this.left = this.right = null; * &#125; *//** * @param &#123;TreeNode&#125; root * @return &#123;string&#125; */var smallestFromLeaf = function(root) &#123; var res = ""; let dfs = (node) =&gt; &#123; if(node === null)&#123; return ''; &#125; let leftStr = dfs(node.left); let rightStr = dfs(node.right); let ch = String.fromCharCode(97 + node.val); var ret = ""; if(leftStr == '' &amp;&amp; rightStr == '')&#123; ret = ch; &#125; else if(leftStr == '' || rightStr == '')&#123; ret = (leftStr != '' ? leftStr : rightStr) + ch; &#125; else&#123; ret = leftStr + ch &lt; rightStr + ch ? leftStr + ch : rightStr + ch; &#125; return ret; &#125;; return dfs(root);&#125;; ä½†æ˜¯ï¼è¿™æ®µä»£ç åªèƒ½é€šè¿‡66/67çš„æµ‹è¯•æ ·ä¾‹ï¼Œ 1[25,1,null,0,0,1,null,null,null,0] è¿™ä¸ªæ— æ³•é€šè¿‡ã€‚ åœ¨çœ‹äº†è¯„è®ºåŒºå¤§ç¥žçš„è¯´æ˜ŽåŽï¼Œæ˜Žç™½äº†ã€‚ è€ƒè™‘ ab å’Œ ababä»¥åŠèŠ‚ç‚¹å€¼zï¼Œæ˜¾ç„¶ï¼Œab &lt; ababï¼Œabz &gt; ababzã€‚ æœ¬æµ‹è¯•æ ·ä¾‹çš„æ ‘å¦‚ä¸‹ï¼š ä¸Šè¿°ä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š é”™è¯¯å‘ç”Ÿåœ¨ç¬¬äºŒå±‚çš„èŠ‚ç‚¹bå¤„ã€‚ å¦‚æžœåªä»¥å­æ ‘çš„å­—ç¬¦ä¸²ä¸ºä¾æ®ï¼Œç”±äºŽä¸çŸ¥é“åŠ ä¸Šçˆ¶äº²èŠ‚ç‚¹ä¹‹åŽï¼Œæž„æˆçš„å­—å…¸åºæ˜¯å¦ä»æ˜¯è¾ƒå°çš„é‚£ä¸ªï¼Œæ‰€ä»¥åœ¨è¿™è¾¹å‘ç”Ÿäº†é”™è¯¯ã€‚ æƒ³åˆ°è¿™ï¼Œä¹Ÿå¥½ä¿®æ­£äº†ï¼Œåªéœ€è¦ä¼ å…¥çˆ¶äº²èŠ‚ç‚¹çš„å€¼ï¼Œå³å¯ã€‚ å®žçŽ° 123456789101112131415161718192021222324252627282930313233/** * Definition for a binary tree node. * function TreeNode(val) &#123; * this.val = val; * this.left = this.right = null; * &#125; *//** * @param &#123;TreeNode&#125; root * @return &#123;string&#125; */var smallestFromLeaf = function(root) &#123; var res = ""; let dfs = (node, s) =&gt; &#123; if(node === null)&#123; return '&#123;'; // &#123; çš„ ascii ç å¤§äºŽ z &#125; s = String.fromCharCode(97 + node.val) + s; let leftStr = dfs(node.left, s); let rightStr = dfs(node.right, s); var ret = ""; if(leftStr == '&#123;' &amp;&amp; rightStr == '&#123;')&#123; ret = s; &#125; else &#123; ret = leftStr &lt; rightStr ? leftStr : rightStr; &#125; return ret; &#125;; return dfs(root, '');&#125;; é¢˜è§£åˆé›†]]></content>
      <tags>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeetCodeé¢˜è§£|279. Perfect Squares]]></title>
    <url>%2F2019%2F04%2F14%2FLeetCode%E9%A2%98%E8%A7%A3-279-Perfect-Squares%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®é“¾æŽ¥ï¼š279. Perfect Squares æ¦‚è¿° æœ¬é¢˜ç›®è¦æ±‚å°†ä¸€ä¸ªç»™å®šçš„æ•°næ‹†åˆ†ä¸ºè‹¥å¹²ä¸ªå¹³æ–¹æ•°çš„å’Œï¼Œæ±‚æœ€å°æ‹†åˆ†æ•°ã€‚ æ€è·¯ è¿™ä¸ªé¢˜ç›®å¯ä»¥ç”¨åŠ¨æ€è§„åˆ’æ¥åšã€‚ dp[i]ä»£è¡¨ç»„æˆiçš„æœ€å°‘å¹³æ–¹æ•°çš„ä¸ªæ•°ï¼Œè¿™ä¸ªå€¼æœ€å¤§å°±æ˜¯å®ƒæœ¬èº«ï¼ˆçœ‹ä½œéƒ½ç”±1ç»„æˆï¼‰ã€‚ è€Œç»„æˆè¿™ä¸ªæ•°çš„æœ€å°å€¼è¦ä¹ˆå°±æ˜¯æœ¬èº«ï¼Œè¦ä¹ˆå°±æ˜¯å‰é¢æŸä¸€ä¸ªæ•°+ä¸€ä¸ªå¹³æ–¹æ•°ï¼ˆæ‰€ä»¥çœ‹ä½œå€¼åŠ ä¸Š1ï¼‰ æ‰€ä»¥çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼šdp[i] = min(dp[i - j * j] + 1, dp[i])ï¼ˆå…¶ä¸­ j &lt; sqrt(iï¼‰) æœ‰è½¬ç§»æ–¹ç¨‹åŽä»£ç å°±å¾ˆå¥½å†™äº†ã€‚ è¿™ä¸ªé¢˜ç›®è¿˜æœ‰å¦å¤–ä¸€ä¸ªè§£æ³•ï¼Œæ˜¯å››å¹³æ–¹å’Œå®šç†ï¼ˆå¥½å§ï¼Œæˆ‘æ²¡å¬è¿‡ï¼Œè¯»è€…æœ‰å…´è¶£å¯ä»¥è‡ªå·±ç ”ç©¶ä¸‹ï¼‰ å®žçŽ° 1234567891011121314151617181920212223/** * @param &#123;number&#125; n * @return &#123;number&#125; */var numSquares = function(n) &#123; let dp = new Array(n + 1); for(let i = 0; i &lt;= n; i++)&#123; dp[i] = n; &#125; for(let i = 1; i &lt;= n; i++)&#123; let sqrt = Math.floor(Math.sqrt(i)); if(sqrt * sqrt == i)&#123; dp[i] = 1; continue; &#125; dp[i] = n; for(let j = 1; j &lt;= sqrt; j++)&#123; dp[i] = Math.min(dp[i], dp[i - j * j] + 1); &#125; &#125; return dp[n];&#125;; é¢˜è§£åˆé›†]]></content>
      <tags>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeetCodeé¢˜è§£|652. Find Duplicate Subtrees]]></title>
    <url>%2F2019%2F04%2F14%2FLeetCode%E9%A2%98%E8%A7%A3-652-Find-Duplicate-Subtrees%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®é“¾æŽ¥ï¼š652. Find Duplicate Subtrees æ¦‚è¿° æœ¬é¢˜ç»™å®šä¸€æ£µäºŒå‰æ ‘ï¼Œè¦æ±‚æ‰¾å‡ºæ‰€æœ‰çš„é‡å¤å­æ ‘ã€‚ æ€è·¯ å¯¹è¿™æ£µæ ‘è¿›è¡Œå‰åºéåŽ†ï¼Œå¦‚æžœæŸä¸€å­æ ‘çš„å‰åºéåŽ†åºåˆ—å·²ç»å‡ºçŽ°è¿‡ï¼Œè¯´æ˜Žè¿™æ£µå­æ ‘æ˜¯é‡å¤å‡ºçŽ°çš„ï¼Œå°†å…¶åŠ å…¥ç»“æžœé›†å³å¯ã€‚ å®žçŽ° 12345678910111213141516171819202122232425262728293031323334/** * Definition for a binary tree node. * function TreeNode(val) &#123; * this.val = val; * this.left = this.right = null; * &#125; *//** * @param &#123;TreeNode&#125; root * @return &#123;TreeNode[]&#125; */var findDuplicateSubtrees = function(root) &#123; let map = &#123;&#125;; let result = []; let preorder = (node) =&gt; &#123; if(node == null)&#123; return "#"; &#125; let vs = preorder(node.left) + preorder(node.right) + node.val; if(map[vs])&#123; if(map[vs] == 1)&#123; result.push(node); &#125; map[vs] += 1; &#125; else&#123; map[vs] = 1; &#125; return vs; &#125; preorder(root); return result;&#125;; é¢˜è§£åˆé›†]]></content>
      <tags>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeetCodeé¢˜è§£|86. Partition List]]></title>
    <url>%2F2019%2F04%2F14%2FLeetCode%E9%A2%98%E8%A7%A3-86-Partition-List%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®é“¾æŽ¥ï¼š86. Partition List æ¦‚è¿° è¿™ä¸ªé¢˜ç›®ç»™å®šä¸€ä¸ªå•é“¾è¡¨Lä»¥åŠä¸€ä¸ªæ•´æ•°xï¼Œä½¿å¾—æ‰€æœ‰å°äºŽxçš„èŠ‚ç‚¹åœ¨å¤§äºŽç­‰äºŽxçš„èŠ‚ç‚¹ä¹‹å‰ï¼ŒåŒæ—¶è¦ä¿è¯é¡ºåºå’ŒåŽŸé“¾è¡¨ä¸€è‡´ã€‚ æ€è·¯ è¿™ä¸ªé¢˜ç›®åªè¦åˆ›å»ºä¸¤ä¸ªé“¾è¡¨ï¼ŒéåŽ†ä¸€éåŽŸé“¾è¡¨Lï¼Œå°†æ‰€æœ‰èŠ‚ç‚¹æŒ‰ç…§è¦æ±‚ï¼Œåˆ†åˆ«æ’å…¥åˆ°ä¸¤ä¸ªæ–°é“¾è¡¨ä¸­ï¼Œå°±å®Œæˆäº†åˆ†éš”ï¼Œç´§æŽ¥ç€åœ¨å°†ä¸¤æ®µé“¾è¡¨è¿žæŽ¥èµ·æ¥ï¼Œå³å¯å¾—åˆ°ç­”æ¡ˆã€‚ å®žçŽ° 1234567891011121314151617181920212223242526272829303132333435/** * Definition for singly-linked list. * function ListNode(val) &#123; * this.val = val; * this.next = null; * &#125; *//** * @param &#123;ListNode&#125; head * @param &#123;number&#125; x * @return &#123;ListNode&#125; */var partition = function(head, x) &#123; if(head == null)&#123; return null; &#125; var smaller = p1 = new ListNode(null), larger = p2 = new ListNode(null); while(head != null)&#123; if(head.val &lt; x)&#123; smaller.next = head; smaller = smaller.next &#125; else&#123; larger.next = head; larger = larger.next; &#125; head = head.next; &#125; larger.next = null; smaller.next = p2.next; return p1.next;&#125;; é¢˜è§£åˆé›†]]></content>
      <tags>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeetCodeé¢˜è§£|687. Longest Univalue Path]]></title>
    <url>%2F2019%2F04%2F13%2FLeetCode%E9%A2%98%E8%A7%A3-687-Longest-Univalue-Path%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®é“¾æŽ¥ï¼š687. Longest Univalue Path æ¦‚è¿° ç»™å®šä¸€æ£µäºŒå‰æ ‘ï¼Œæ‰¾å‡ºæ ‘ä¸­æœ‰ç›¸åŒå€¼çš„æœ€é•¿è·¯å¾„é•¿åº¦ã€‚ æ€è·¯ ä½¿ç”¨DFSï¼Œæ‰¾å‡ºæ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘å·¦å³ä¸¤è¾¹çš„æœ€é•¿è·¯å¾„å€¼lrï¼Œå¦‚æžœå½“å‰èŠ‚ç‚¹ä¸Žå·¦(å³)å­æ ‘çš„èŠ‚ç‚¹å€¼ç›¸ç­‰ï¼Œåˆ™å°†å½“å‰èŠ‚ç‚¹çš„å·¦(å³)å€¼å®šä¸ºå·¦(å³)å­æ ‘lrä¸­çš„æœ€å¤§å€¼+1ã€‚ å®žçŽ° 123456789101112131415161718192021222324252627282930313233343536373839/** * Definition for a binary tree node. * function TreeNode(val) &#123; * this.val = val; * this.left = this.right = null; * &#125; *//** * @param &#123;TreeNode&#125; root * @return &#123;number&#125; */var longestUnivaluePath = function(root) &#123; if(root == null)&#123; return 0; &#125; var maxLength = 0; var dfs = function(node)&#123; if(node == null || (node.left == null &amp;&amp; node.right == null))&#123; return &#123; left: 0, right: 0 &#125;; &#125; const &#123; left: ll, right: lr &#125; = dfs(node.left); const &#123; left: rl, right: rr &#125; = dfs(node.right); var left = 0, right = 0; if(node.left != null &amp;&amp; node.val == node.left.val)&#123; left = Math.max(ll, lr) + 1; &#125; if(node.right != null &amp;&amp; node.val == node.right.val)&#123; right = Math.max(rl, rr) + 1; &#125; maxLength = Math.max(maxLength, left + right); return &#123; left: left, right: right &#125;; &#125; dfs(root); return maxLength;&#125;; é¢˜è§£åˆé›†]]></content>
      <tags>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeetCodeé¢˜è§£|143. Reorder List]]></title>
    <url>%2F2019%2F04%2F13%2FLeetCode%E9%A2%98%E8%A7%A3-143-Reorder-List%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®é“¾æŽ¥ï¼š143. Reorder List æ¦‚è¿° ç»™å®šä¸€ä¸ªå•é“¾è¡¨L: L0â†’L1â†’â€¦â†’Ln-1â†’Lnï¼Œå°†å…¶é‡æŽ’ä¸ºï¼šL0â†’Lnâ†’L1â†’Ln-1â†’L2â†’Ln-2â†’â€¦ï¼Œå³å°†Lå¤´å°¾äº¤æ›¿é‡æŽ’åºã€‚ æ€è·¯ æ•´ä½“å››é‡Œè·¯ä¸ºï¼šå…ˆå°†Lä¸€åˆ†ä¸ºäºŒï¼Œç„¶åŽå°†åŽåŠæ®µé“¾è¡¨é€†åºï¼Œå†ä¾æ¬¡æ’å…¥å‰åŠæ®µèŠ‚ç‚¹ä¸­ã€‚ åœ¨æ‰¾é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹æ—¶ï¼Œä½¿ç”¨å¿«æ…¢æŒ‡é’ˆå°±å¯ä»¥å¿«é€Ÿæ‰¾åˆ°ã€‚ é€†åºæ—¶ï¼Œå°†å½“å‰èŠ‚ç‚¹çš„åŽç»§èŠ‚ç‚¹è¿›è¡Œä½ç½®äº¤æ¢ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œç»™å®šé“¾è¡¨l:headâ†’bâ†’câ†’dã€‚é¦–å…ˆï¼Œå°†bçš„åŽç»§ï¼Œæ”¹ä¸ºåŽŸåŽç»§cçš„åŽç»§dï¼Œå³ï¼šheadâ†’bâ†’dï¼Œç„¶åŽå°†cæŒ‡å‘bï¼ŒheadæŒ‡å‘cï¼Œå³ï¼šheadâ†’câ†’bâ†’d å®žçŽ° 12345678910111213141516171819202122232425262728293031323334353637383940414243444546/** * Definition for singly-linked list. * function ListNode(val) &#123; * this.val = val; * this.next = null; * &#125; *//** * @param &#123;ListNode&#125; head * @return &#123;void&#125; Do not return anything, modify head in-place instead. */var reorderList = function(head) &#123; if(head == null || head.next == null)&#123; return; &#125; var fast = head, slow = head; // æ‰¾åˆ°ä¸­é—´èŠ‚ç‚¹ while(fast.next != null &amp;&amp; fast.next.next != null)&#123; slow = slow.next; fast = fast.next.next; &#125; var middle = slow, cur = slow.next; // åè½¬åŽåŠæ®µé“¾è¡¨ while(cur.next != null)&#123; var tmp = cur.next; cur.next = tmp.next; tmp.next = middle.next; middle.next = tmp; &#125; // æ‹¼æŽ¥ var p1 = head, p2 = slow.next; while(p1 != slow)&#123; slow.next = p2.next; p2.next = p1.next; p1.next = p2; p1 = p2.next; p2 = slow.next; &#125;&#125;; é¢˜è§£åˆé›†]]></content>
      <tags>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeetCodeé¢˜è§£|3. Longest Substring Without Repeating Characters]]></title>
    <url>%2F2019%2F04%2F13%2FLeetCode%E9%A2%98%E8%A7%A3-3-Longest-Substring-Without-Repeating-Characters%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®é“¾æŽ¥ï¼š3. Longest Substring Without Repeating Characters æ¦‚è¿° è¿™ä¸ªé¢˜ç›®ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²sï¼Œæ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²çš„é•¿åº¦ã€‚ æ€è·¯ è¯¥é¢˜ç›®å¯ä½¿ç”¨ æ»‘åŠ¨çª—å£ æ¥åšã€‚ å…·ä½“æ¥è¯´ï¼Œä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆleftã€rightæ¥ç¡®å®šå‡ºä¸€ä¸ªå­ä¸²çš„èŒƒå›´ï¼Œå¦‚æžœs[right]å·²ç»åœ¨s[left...right-1]ä¸­å‡ºçŽ°è¿‡ï¼Œåˆ™å°†leftå‘å³æŒªï¼Œåä¹‹åˆ™å°†rightå‘å³æŒªï¼Œç›´åˆ°rightåˆ°è¾¾sç»“å°¾ã€‚ é€šè¿‡è¿™æ ·å¯¹sè¿›è¡Œä¸€æ¬¡æ‰«æï¼Œå³å¯å¾—åˆ°æœ€é•¿å­ä¸²ã€‚ å®žçŽ° 123456789101112131415161718192021/** * @param &#123;string&#125; s * @return &#123;number&#125; */var lengthOfLongestSubstring = function(s) &#123; var maxLength = 0; var left = 0, right = 1; while(right &lt;= s.length)&#123; if(maxLength &lt; right - left)&#123; maxLength = right - left; &#125; if(s.substring(left, right).indexOf(s[right]) != -1)&#123; left++; &#125; else&#123; right++; &#125; &#125; return maxLength;&#125;; é¢˜è§£åˆé›†]]></content>
      <tags>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeetCodeé¢˜è§£|971. Flip Binary Tree To Match Preorder Traversal]]></title>
    <url>%2F2019%2F04%2F13%2FLeetCode%E9%A2%98%E8%A7%A3-971-Flip-Binary-Tree-To-Match-Preorder-Traversal%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®é“¾æŽ¥ï¼š971. Flip Binary Tree To Match Preorder Traversal æ¦‚è¿° è¿™ä¸ªé¢˜ç›®ç»™å®šäº†ä¸€æ£µæœ‰Nä¸ªèŠ‚ç‚¹çš„äºŒå‰æ ‘ä»¥åŠä¸€ä¸ªåºåˆ—vï¼Œé—®å¦‚ä½•ç¿»è½¬æœ€å°‘çš„èŠ‚ç‚¹ï¼ˆäº¤æ¢å·¦å³å­æ ‘ï¼‰ï¼Œä½¿å¾—å‰åºéåŽ†ç»“æžœå’Œç»™å®šçš„åºåˆ—ä¸€è‡´ã€‚ æ€è·¯ ä½¿ç”¨DFSå‰åºéåŽ†è¿™æ£µæ ‘ï¼Œå¹¶ä¸”ä½¿ç”¨ä¸€ä¸ªæŒ‡é’ˆiï¼Œè®°å½•å½“å‰èŠ‚ç‚¹nodeåº”è¯¥å’Œvä¸­çš„å“ªä¸ªå€¼ç›¸ç­‰ï¼ŒDFSæ—¶ï¼Œå¯åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š node === nullï¼Œè¯´æ˜Žæˆ‘ä»¬å·²ç»éåŽ†å®Œäº†ï¼Œè¿”å›žtrue node.val !== v[i]ï¼Œè¯´æ˜Žè¯¥èŠ‚ç‚¹å€¼ä¸æ˜¯é¢„æœŸçš„ï¼Œè¿”å›žfalse node.left.!== null &amp;&amp; node.left.val !== v[i]ï¼Œè¯´æ˜Žå·¦å„¿å­å­˜åœ¨ä½†æ˜¯å…¶å€¼å¹¶ä¸æ˜¯é¢„æœŸçš„ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥ç¿»è½¬nodeèŠ‚ç‚¹ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸éœ€è¦çœŸçš„åŽ»ä¿®æ”¹æŒ‡é’ˆï¼Œåªè¦å…ˆåŽ»éåŽ†å³å­æ ‘ï¼Œå†åŽ»éåŽ†å·¦å­æ ‘ï¼Œå³å¯è¾¾åˆ°ç¿»è½¬å¹¶ä¸”å‰åºéåŽ†çš„ç›®çš„ã€‚ å®žçŽ° 12345678910111213141516171819202122232425262728293031/** * Definition for a binary tree node. * function TreeNode(val) &#123; * this.val = val; * this.left = this.right = null; * &#125; *//** * @param &#123;TreeNode&#125; root * @param &#123;number[]&#125; voyage * @return &#123;number[]&#125; */var flipMatchVoyage = function(root, voyage) &#123; var result = []; var i = 0; var dfs = function(node)&#123; if(node == null)&#123; return true; &#125; if(node.val != voyage[i++])&#123; return false; &#125; if(node.left != null &amp;&amp; node.left.val != voyage[i])&#123; result.push(node.val); return dfs(node.right) &amp;&amp; dfs(node.left); &#125; return dfs(node.left) &amp;&amp; dfs(node.right); &#125; return dfs(root) ? result : [-1];&#125;; é¢˜è§£åˆé›†]]></content>
      <tags>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeetCodeé¢˜è§£|1017. Convert to Base -2]]></title>
    <url>%2F2019%2F04%2F13%2FLeetCode%E9%A2%98%E8%A7%A3-1017-Convert-to-Base-2%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®é“¾æŽ¥ï¼š1017. Convert to Base -2 æ¦‚è¿° è¿™ä¸ªé¢˜ç›®è¦æ±‚å¾ˆç®€å•ï¼Œå°±æ˜¯å®žçŽ°ä¸€ä¸ªåè¿›åˆ¶åˆ°è´ŸäºŒè¿›åˆ¶çš„è½¬æ¢ã€‚ æ€è·¯ åœ¨å®žçŽ°å‰ï¼Œå…ˆå›žé¡¾ä¸‹è¿›åˆ¶è½¬æ¢çš„æ–¹æ³•ï¼šé™¤kå–ä½™æ³• ä»¥åè¿›åˆ¶ä¸‹çš„N = 5è½¬ä¸ºäºŒè¿›åˆ¶ä¸ºä¾‹ï¼š ç¬¬ä¸€æ­¥ï¼š5æ•´é™¤2ï¼Œå•†ä¸º2ï¼Œä½™1ï¼› ç¬¬äºŒæ­¥ï¼š2æ•´é™¤2ï¼Œå•†ä¸º1ï¼Œä½™0ï¼› ç¬¬ä¸‰æ­¥ï¼š1æ•´é™¤2ï¼Œå•†ä¸º0ï¼Œä½™1ï¼› ç”±äºŽåˆ°ç¬¬ä¸‰æ­¥æ—¶å•†å·²ç»ç­‰äºŽ0ï¼Œæ•…ç®—æ³•ç»“æŸã€‚æ‰€ä»¥ï¼Œ510=1012 è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä½è¿ç®—æ¥å–ä½™æ•°æˆ–åšé™¤æ³•ã€‚ è®¾Xå¯¹Yæ±‚ä½™ï¼ŒYç­‰äºŽ2Nï¼Œå…¬å¼ä¸ºï¼šX &amp; (2N - 1) æˆ– X&amp;(~Y)ã€‚ å› æ­¤ï¼Œåœ¨æ±‚ä½™æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªè¦ä½¿ç”¨N &amp; 1å³å¯ã€‚å®Œæ•´çš„äºŒè¿›åˆ¶è½¬æ¢ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516/** * @param &#123;number&#125; N * @return &#123;string&#125; */var base2 = function(N) &#123; if(N == 0)&#123; return "0"; &#125; let remainders = []; while(N != 0)&#123; var x = N &amp; 1; remainders.push(x); N = N &gt;&gt; 1; &#125; return remainders.reverse().join("");&#125;; å‰é¢ä¸¾çš„ä¾‹å­éƒ½æ˜¯äºŒè¿›åˆ¶çš„ï¼Œé‚£è´ŸäºŒè¿›åˆ¶å‘¢ï¼Ÿç±»ä¼¼çš„ï¼Œæˆ‘ä»¬åœ¨è½¬æ¢ä¸ºè´ŸäºŒè¿›åˆ¶æ—¶ï¼Œåªéœ€è¦å°†é™¤æ•°æ”¹ä¸º-2å³å¯ã€‚ å®žçŽ° 12345678910111213141516/** * @param &#123;number&#125; N * @return &#123;string&#125; */var baseNeg2 = function(N) &#123; if(N == 0)&#123; return "0"; &#125; let remainders = []; while(N != 0)&#123; var x = N &amp; 1; remainders.push(x); N = -(N &gt;&gt; 1); // æ³¨æ„è¿™é‡Œå¤šäº†ä¸ªè´Ÿå· &#125; return remainders.reverse().join("");&#125;; é¢˜è§£åˆé›†]]></content>
      <tags>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeetCodeé¢˜è§£|380. Insert Delete GetRandom O(1)]]></title>
    <url>%2F2019%2F04%2F13%2FLeetCode%E9%A2%98%E8%A7%A3-380-Insert-Delete-GetRandom-O-1%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®é“¾æŽ¥ï¼š380. Insert Delete GetRandom O(1) æ¦‚è¿° è¿™ä¸ªé¢˜ç›®è¦æ±‚è®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æž„ï¼Œä½¿å¾—èƒ½å¤Ÿåœ¨O(1)æ—¶é—´å†…å®Œæˆæ’å…¥ã€åˆ é™¤ã€éšæœºèŽ·å–ã€‚ æ€è·¯ çœ‹åˆ°è¿™ä¸ªè¦æ±‚ï¼Œå¾ˆè‡ªç„¶å°±æƒ³åˆ°äº†æ•°ç»„ã€‚ä½†æ˜¯å•çº¯æ•°ç»„å¹¶ä¸èƒ½æ»¡è¶³é¢˜ç›®ä¸­è¦æ±‚çš„å¦‚æžœå­˜åœ¨å€¼æ‰å¯åˆ é™¤/ä¸å¯æ’å…¥ï¼Œä¸ºæ­¤ï¼Œå¯ä»¥å¼•å…¥ä¸€ä¸ªMapï¼Œç”¨äºŽä¿å­˜æ•°ç»„ä¸­å€¼çš„ä½ç½®æƒ…å†µã€‚ æ’å…¥æ—¶ï¼Œå…ˆåœ¨mapä¸­æŸ¥æ‰¾ä¸‹æ˜¯å¦å­˜åœ¨valï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™æŒ‰é¢˜ç›®è¦æ±‚ï¼Œè¿”å›žfalseï¼Œå¦åˆ™åœ¨æ•°ç»„å°¾éƒ¨æ’å…¥è¯¥å€¼ï¼Œå¹¶ä¸”åœ¨mapä¸­è®°å½•å…¶ä½ç½®ã€‚ åˆ é™¤æ—¶ï¼ŒåŒæ ·æ˜¯åŽ»mapä¸­æŸ¥æ‰¾ä¸‹æ˜¯å¦å­˜åœ¨valï¼Œè‹¥ä¸å­˜åœ¨ï¼Œä¹Ÿæ˜¯æŒ‰é¢˜ç›®è¦æ±‚ï¼Œè¿”å›žfalseï¼Œå¦åˆ™çš„è¯ï¼Œå°†æ•°ç»„æœ€åŽä¸€ä¸ªå…ƒç´ lastæ”¾åˆ°valçš„ä½ç½®ä¸Šï¼ŒåŒæ—¶æ›´æ–°laståœ¨mapä¸­çš„ç´¢å¼•ï¼Œæœ€åŽå°†æ•°ç»„æœ€åŽä¸€ä¸ªå…ƒç´ åˆ é™¤æŽ‰ã€‚ å®žçŽ° 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758/** * Initialize your data structure here. */var RandomizedSet = function() &#123; this.set = []; this.map = &#123;&#125;;&#125;;/** * Inserts a value to the set. Returns true if the set did not already contain the specified element. * @param &#123;number&#125; val * @return &#123;boolean&#125; */RandomizedSet.prototype.insert = function(val) &#123; if(val in this.map)&#123; return false; &#125; this.set.push(val); this.map[val] = this.set.length - 1; return true;&#125;;/** * Removes a value from the set. Returns true if the set contained the specified element. * @param &#123;number&#125; val * @return &#123;boolean&#125; */RandomizedSet.prototype.remove = function(val) &#123; if(!(val in this.map))&#123; return false; &#125; let last = this.set.pop(); let index = this.map[val]; delete this.map[val]; if(val !== last)&#123; this.set[index] = last; this.map[last] = index; &#125; return true;&#125;;/** * Get a random element from the set. * @return &#123;number&#125; */RandomizedSet.prototype.getRandom = function() &#123; let rand = Math.floor(Math.random() * this.set.length); return this.set[rand]&#125;;/** * Your RandomizedSet object will be instantiated and called as such: * var obj = new RandomizedSet() * var param_1 = obj.insert(val) * var param_2 = obj.remove(val) * var param_3 = obj.getRandom() */ é¢˜è§£åˆé›†]]></content>
      <tags>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeetCodeé¢˜è§£é›†åˆ]]></title>
    <url>%2F2019%2F04%2F13%2FLeetCode%E9%A2%98%E8%A7%A3%E9%9B%86%E5%90%88%2F</url>
    <content type="text"><![CDATA[æ¯æ—¥æ¥ç‚¹LeetCode # Title Solution Difficulty Tag 380 Insert Delete GetRandom O(1) js Medium Array 1017 Convert to Base -2 js Medium Math 971 Flip Binary Tree To Match Preorder Traversal js Medium Tree 3 Longest Substring Without Repeating Characters js Medium String 143 Reorder List js Medium Linked List 687 Longest Univalue Path js Easy Tree 86 Partition List js Medium Linked List 652 Find Duplicate Subtrees js Medium Tree 279 Perfect Squares js Medium Math 988 Smallest String Starting From Leaf js Medium Tree 775 Global and Local Inversions js Medium Tree 26 åˆ é™¤æŽ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ js Easy Array 27 ç§»é™¤å…ƒç´  js Easy Array 28 å®žçŽ°strStr() js Easy String]]></content>
      <tags>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CORS]]></title>
    <url>%2F2019%2F04%2F03%2Fcors%2F</url>
    <content type="text"><![CDATA[CORSæ˜¯ä¸€ä¸ªW3Cæ ‡å‡†ï¼Œå…¨ç§°æ˜¯&quot;è·¨åŸŸèµ„æºå…±äº«&quot;ï¼ˆCross-origin resource sharingï¼‰ã€‚å®ƒå…è®¸æµè§ˆå™¨å‘è·¨åŸŸæœåŠ¡å™¨ï¼Œå‘å‡ºXMLHttpRequestè¯·æ±‚ï¼Œä»Žè€Œå…‹æœäº†AJAXåªèƒ½åŒæºä½¿ç”¨çš„é™åˆ¶ã€‚ æœ¬æ–‡ä»‹ç»äº†CORSçš„å†…éƒ¨æœºåˆ¶ã€‚ ç®€ä»‹ CORSéœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨åŒæ—¶æ”¯æŒã€‚ç›®å‰ï¼Œä¸»æµæµè§ˆå™¨éƒ½å·²åŸºæœ¬æä¾›å¯¹è·¨åŸŸèµ„æºå…±äº«çš„æ”¯æŒï¼Œç§»åŠ¨ç«¯æµè§ˆå™¨ä¹Ÿå‡ ä¹Žå…¨éƒ¨æ”¯æŒã€‚ æ•´ä¸ªCORSé€šä¿¡è¿‡ç¨‹ï¼Œéƒ½æ˜¯æµè§ˆå™¨è‡ªåŠ¨å®Œæˆï¼Œä¸éœ€è¦ç”¨æˆ·å‚ä¸Žã€‚å¯¹äºŽå¼€å‘è€…æ¥è¯´ï¼ŒCORSé€šä¿¡ä¸ŽåŒæºçš„AJAXé€šä¿¡æ²¡æœ‰å·®åˆ«ï¼Œä»£ç å®Œå…¨ä¸€æ ·ã€‚æµè§ˆå™¨ä¸€æ—¦å‘çŽ°AJAXè¯·æ±‚è·¨æºï¼Œå°±ä¼šè‡ªåŠ¨æ·»åŠ ä¸€äº›é™„åŠ çš„å¤´ä¿¡æ¯ï¼Œæœ‰æ—¶è¿˜ä¼šå¤šå‡ºä¸€æ¬¡é™„åŠ çš„è¯·æ±‚ï¼Œä½†ç”¨æˆ·ä¸ä¼šæœ‰æ„Ÿè§‰ã€‚ å› æ­¤ï¼Œå®žçŽ°CORSé€šä¿¡çš„å…³é”®æ˜¯æœåŠ¡å™¨ã€‚åªè¦æœåŠ¡å™¨å®žçŽ°äº†CORSæŽ¥å£ï¼Œå°±å¯ä»¥è·¨æºé€šä¿¡ã€‚ ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦CORSï¼Ÿ ç”±XMLHttpRequestæˆ–Fetchå‘èµ·çš„è·¨åŸŸ HTTP è¯·æ±‚ã€‚ Web å­—ä½“ (CSS ä¸­é€šè¿‡@font-faceä½¿ç”¨è·¨åŸŸå­—ä½“èµ„æº) ä½¿ç”¨drawImageå°†Images/videoç”»é¢ç»˜åˆ¶åˆ°canvas ä¾‹å¦‚ï¼Œå½“ä½ å¼•ç”¨äº†æŸä¸ªç¬¬ä¸‰æ–¹CDNä¸Šçš„å­—ä½“æ–‡ä»¶æ—¶ï¼š 12345/* CSS */@font-face &#123; font-family: 'FontAwesome'; src: url('http://cdn.com/fonts/fontawesome.ttf') format('truetype');&#125; å¦‚æžœè¯¥CDNæœåŠ¡å•†æœªæ­£ç¡®è®¾ç½®Access-Control-Allow-Originï¼Œé‚£ä¹ˆæµè§ˆå™¨æ— æ³•åŠ è½½å­—ä½“èµ„æºã€‚ ä¸¤ç§è¯·æ±‚ æµè§ˆå™¨å°†CORSè¯·æ±‚åˆ†æˆä¸¤ç±»ï¼šç®€å•è¯·æ±‚ï¼ˆsimple requestï¼‰å’Œéžç®€å•è¯·æ±‚ï¼ˆnot-so-simple requestï¼‰ã€‚ è‹¥è¯·æ±‚æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œåˆ™è¯¥è¯·æ±‚å±žäºŽç®€å•è¯·æ±‚ï¼š è¯·æ±‚æ–¹æ³•æ˜¯ä¸‹åˆ—ä¸‰ç§ä¹‹ä¸€ï¼š GET POST HEAD HTTPçš„å¤´ä¿¡æ¯ä¸å¾—åŒ…å«ä»¥ä¸‹å‡ ç§å­—æ®µä¹‹å¤–çš„å­—æ®µï¼š Accept Accept-Language Content-Language Content-Typeï¼š ä»…é™äºŽtext/plainã€multipart/form-dataã€application/x-www-form-urlencodedä¸‰ä¸ªå€¼ å‡¡æ˜¯ä¸åŒæ—¶æ»¡è¶³ä¸Šé¢ä¸¤ä¸ªæ¡ä»¶ï¼Œå°±å±žäºŽéžç®€å•è¯·æ±‚ã€‚ æµè§ˆå™¨å¯¹è¿™ä¸¤ç§è¯·æ±‚çš„å¤„ç†ï¼Œæ˜¯ä¸ä¸€æ ·çš„ã€‚ Â¶ç®€å•è¯·æ±‚ å¯¹äºŽç®€å•è¯·æ±‚ï¼Œæµè§ˆå™¨ç›´æŽ¥å‘å‡ºCORSè¯·æ±‚ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯åœ¨å¤´ä¿¡æ¯ä¹‹ä¸­ï¼Œå¢žåŠ ä¸€ä¸ªOriginå­—æ®µã€‚ æˆ‘ä»¬é¦–å…ˆå‘èµ·ä¸€ä¸ªè·¨åŸŸè¯·æ±‚ï¼š å¯ä»¥çœ‹åˆ°ï¼Œæµè§ˆå™¨è‡ªåŠ¨åœ¨è¯·æ±‚å¤´éƒ¨åŠ äº†ä¸€ä¸ªOriginå­—æ®µï¼ŒåŒæ—¶æœåŠ¡å™¨è¿”å›žçš„çŠ¶æ€ç ä¹Ÿä¸º200ï¼Œä½†æ˜¯åœ¨æŽ§åˆ¶å°æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™æ ·ä¸€ä¸ªCORSçš„æŠ¥é”™ï¼š åœ¨æœåŠ¡å™¨æˆ‘ä»¬ä¹Ÿèƒ½çœ‹åˆ°è¿™æ ·çš„è®°å½•ï¼š è¿™ä¸ªä¹Ÿè¯´æ˜Žäº†ï¼Œè·¨åŸŸè¯·æ±‚å¯ä»¥æ­£å¸¸å‘èµ·ï¼Œä½†æ˜¯è¿”å›žç»“æžœè¢«æµè§ˆå™¨æ‹¦æˆªäº†ã€‚ æˆ‘ä»¬å¯¹æœåŠ¡å™¨ç¨åŠ ä¿®æ”¹ï¼Œç»™å…¶å“åº”å¤´éƒ¨åŠ ä¸Šå¦‚ä¸‹å­—æ®µï¼š 1Access-Control-Allow-Origin: http://sender.com æ­¤æ—¶æˆ‘ä»¬å†å‘èµ·è¯·æ±‚ï¼Œå°±å¯ä»¥çœ‹åˆ°ç»“æžœå¦‚ä¸‹ï¼š åŒæ—¶åœ¨æŽ§åˆ¶å°ä¹Ÿæ²¡æœ‰äº†CORSçš„æŠ¥é”™äº†ã€‚ æ€»ç»“ä¸€ä¸‹ï¼Œåœ¨å‘èµ·ä¸€ä¸ªç®€å•è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨å¦‚æžœå‘çŽ°è¿™æ¬¡è¯·æ±‚æ˜¯ä¸€ä¸ªè·¨åŸŸAJAXè¯·æ±‚æ—¶ï¼Œå°±è‡ªåŠ¨åœ¨å¤´ä¿¡æ¯ä¹‹ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªOriginå­—æ®µã€‚Originå­—æ®µç”¨æ¥è¯´æ˜Žï¼Œæœ¬æ¬¡è¯·æ±‚æ¥è‡ªå“ªä¸ªæºï¼ˆåè®® + åŸŸå + ç«¯å£ï¼‰ã€‚æœåŠ¡å™¨æ ¹æ®è¿™ä¸ªå€¼ï¼Œå†³å®šæ˜¯å¦åŒæ„è¿™æ¬¡è¯·æ±‚ã€‚ å¦‚æžœOriginæŒ‡å®šçš„æºï¼Œä¸åœ¨è®¸å¯èŒƒå›´å†…ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›žä¸€ä¸ªæ­£å¸¸çš„HTTPå›žåº”ã€‚æµè§ˆå™¨å‘çŽ°ï¼Œè¿™ä¸ªå›žåº”çš„å¤´ä¿¡æ¯æ²¡æœ‰åŒ…å«Access-Control-Allow-Originå­—æ®µæˆ–è€…è¿™ä¸ªå­—æ®µçš„å€¼ä¸­ä¸åŒ…å«è¿™ä¸ªOriginæŒ‡å®šçš„æºï¼Œå°±çŸ¥é“å‡ºé”™äº†ï¼Œä»Žè€ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¢«XMLHttpRequestçš„onerrorå›žè°ƒå‡½æ•°æ•èŽ·ã€‚æ³¨æ„ï¼Œè¿™ç§é”™è¯¯æ— æ³•é€šè¿‡çŠ¶æ€ç è¯†åˆ«ï¼Œå› ä¸ºHTTPå›žåº”çš„çŠ¶æ€ç æœ‰å¯èƒ½æ˜¯200ä¹Ÿæœ‰å¯èƒ½æ˜¯å…¶ä»–ï¼Œè¿™ä¸ªå–å†³äºŽæœåŠ¡å™¨æ˜¯å¦æœ‰åšè¿™æ–¹é¢çš„å¤„ç†ã€‚æ¯”å¦‚ï¼ŒæœåŠ¡å™¨å¯¹è¯·æ±‚å¤´ä¸­çš„Originè¿›è¡Œäº†åˆ¤æ–­åŽï¼Œå¯èƒ½ç»™å‡ºè¯¸å¦‚403ç­‰è¿”å›žç å¦‚ä¸‹ï¼š æœåŠ¡å™¨å¯¹Originå­—æ®µåˆ¤æ–­åŽï¼Œè¿”å›žäº†403ï¼ŒåŒæ ·çš„è¯·æ±‚å¾—åˆ°äº†ä¸åŒçš„å“åº”ç»“æžœï¼ˆå¯¹æ¯”ä¸Šå›¾ï¼‰ï¼š Â¶éžç®€å•è¯·æ±‚ å¯¹äºŽéžç®€å•è¯·æ±‚ï¼Œæµè§ˆå™¨å¹¶ä¸ä¼šç«‹å³æ‰§è¡Œå¯¹åº”çš„è¯·æ±‚ä»£ç ï¼Œè€Œæ˜¯ä¼šå…ˆå‘é€ä¸€ä¸ªè¢«ç§°ä¸ºâ€œé¢„æ£€â€(Preflight)çš„OPTIONè¯·æ±‚ï¼Œç”¨äºŽè¯¢é—®è¦è¢«è·¨åŸŸè®¿é—®çš„æœåŠ¡å™¨ï¼Œæ˜¯å¦å…è®¸å½“å‰åŸŸåä¸‹çš„é¡µé¢å‘é€è·¨åŸŸçš„è¯·æ±‚ã€‚ æ¯”å¦‚ï¼Œä½¿ç”¨ä¸‹é¢çš„ä»£ç å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼š 12345var url = 'http://receiver.com/testNotSimpleReq.php';var xhr = new XMLHttpRequest();xhr.open('PUT', url, true);xhr.setRequestHeader('X-Custom-Header', 'value');xhr.send(); è¿™æ®µä»£ç ä¸­ï¼ŒHTTPè¯·æ±‚çš„æ–¹æ³•æ˜¯PUTï¼Œå¹¶ä¸”å‘é€ä¸€ä¸ªè‡ªå®šä¹‰å¤´ä¿¡æ¯X-Custom-Headerã€‚ æµè§ˆå™¨å‘çŽ°è¿™æ˜¯ä¸€ä¸ªéžç®€å•è¯·æ±‚ï¼Œå°±ä¼šå…ˆè‡ªåŠ¨å‘èµ·ä¸€ä¸ªâ€œé¢„æ£€â€è¯·æ±‚ï¼Œè¦æ±‚æœåŠ¡å™¨ç¡®è®¤å¯ä»¥è¿™æ ·è¯·æ±‚ï¼š åœ¨è¯·æ±‚å¤´éƒ¨ä¸­ï¼Œå…³é”®å­—æ®µæ˜¯Originï¼Œè¡¨ç¤ºè¯·æ±‚æ¥è‡ªå“ªä¸ªæºã€‚ é™¤äº†Originå­—æ®µï¼Œ&quot;é¢„æ£€&quot;è¯·æ±‚çš„å¤´ä¿¡æ¯åŒ…æ‹¬ä¸¤ä¸ªç‰¹æ®Šå­—æ®µã€‚ Access-Control-Request-Method è¯¥å­—æ®µæ˜¯å¿…é¡»çš„ï¼Œç”¨æ¥åˆ—å‡ºæµè§ˆå™¨çš„CORSè¯·æ±‚ä¼šç”¨åˆ°å“ªäº›HTTPæ–¹æ³•ï¼Œä¸Šä¾‹æ˜¯PUTã€‚ Access-Control-Request-Headers è¯¥å­—æ®µæ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼ŒæŒ‡å®šæµè§ˆå™¨CORSè¯·æ±‚ä¼šé¢å¤–å‘é€çš„å¤´ä¿¡æ¯å­—æ®µï¼Œä¸Šä¾‹æ˜¯X-Custom-Headerã€‚ åœ¨â€œé¢„æ£€â€è¯·æ±‚çš„å“åº”å¤´éƒ¨ä¸­ï¼Œå‡ºçŽ°äº†ä¸‰ä¸ªå­—æ®µï¼š Access-Control-Allow-Origin å’Œå‰é¢ä¸€æ ·ï¼Œè¡¨ç¤ºæŽ¥å—çš„åŸŸå Access-Control-Allow-Methods é€—å·åˆ†éš”çš„ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨æ˜ŽæœåŠ¡å™¨æ”¯æŒçš„æ‰€æœ‰è·¨åŸŸè¯·æ±‚çš„æ–¹æ³•ã€‚æ³¨æ„ï¼Œè¿”å›žçš„æ˜¯æ‰€æœ‰æ”¯æŒçš„æ–¹æ³•ï¼Œè€Œä¸å•æ˜¯æµè§ˆå™¨è¯·æ±‚çš„é‚£ä¸ªæ–¹æ³•ã€‚è¿™æ˜¯ä¸ºäº†é¿å…å¤šæ¬¡&quot;é¢„æ£€&quot;è¯·æ±‚ã€‚ Access-Control-Allow-Headers å¦‚æžœæµè§ˆå™¨è¯·æ±‚åŒ…æ‹¬Access-Control-Request-Headerså­—æ®µï¼Œåˆ™Access-Control-Allow-Headerså­—æ®µæ˜¯å¿…éœ€çš„ã€‚å®ƒä¹Ÿæ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼Œè¡¨æ˜ŽæœåŠ¡å™¨æ”¯æŒçš„æ‰€æœ‰å¤´ä¿¡æ¯å­—æ®µï¼Œä¸é™äºŽæµè§ˆå™¨åœ¨&quot;é¢„æ£€&quot;ä¸­è¯·æ±‚çš„å­—æ®µã€‚ å¦‚æžœè¯·æ±‚æ–¹æ³•æˆ–è€…è¯·æ±‚ä¸­å«æœ‰çš„è‡ªå®šä¹‰å¤´éƒ¨ä¸åœ¨å“åº”å¤´éƒ¨çš„Access-Control-Allow-Methodså’ŒAccess-Control-Allow-Headersä¸­ï¼Œæµè§ˆå™¨å°±ä¸ä¼šçœŸæ­£å‘èµ·è¯¥è¯·æ±‚ï¼ŒåŒæ—¶åœ¨æŽ§åˆ¶å°æŠ¥é”™å¦‚ä¸‹ï¼š å¦‚æžœé¡ºåˆ©é€šè¿‡â€œé¢„æ£€â€çš„è¯ï¼Œæµè§ˆå™¨åˆ™ä¼šçœŸæ­£å‘èµ·è¯·æ±‚ï¼š Cookiesä¸ŽCORS é»˜è®¤æƒ…å†µä¸‹ï¼ŒCookieä¸åŒ…æ‹¬åœ¨CORSè¯·æ±‚ä¹‹ä¸­ã€‚ å¦‚æžœæœåŠ¡å™¨å…è®¸è¯·æ±‚ä¸­åŒ…å«Cookiesï¼Œåˆ™éœ€è¦åœ¨å“åº”å¤´éƒ¨ä¸­åŠ å…¥å­—æ®µ 1Access-Control-Allow-Credentials: true å¦‚æžœæœåŠ¡å™¨ä¸è¦æµè§ˆå™¨å‘é€Cookieï¼Œåˆ é™¤è¯¥å­—æ®µæˆ–è€…è®¾ç½®ä¸ºfalseå³å¯ã€‚ å¦ä¸€æ–¹é¢ï¼Œå¼€å‘è€…å¿…é¡»åœ¨AJAXè¯·æ±‚ä¸­æ‰“å¼€withCredentialså±žæ€§ã€‚ 12var xhr = new XMLHttpRequest();xhr.withCredentials = true; å¦åˆ™ï¼Œå³ä½¿æœåŠ¡å™¨åŒæ„å‘é€Cookieï¼Œæµè§ˆå™¨ä¹Ÿä¸ä¼šå‘é€ã€‚æˆ–è€…ï¼ŒæœåŠ¡å™¨è¦æ±‚è®¾ç½®Cookieï¼Œæµè§ˆå™¨ä¹Ÿä¸ä¼šå¤„ç†ã€‚ ä½†æ˜¯ï¼Œå¦‚æžœçœç•¥withCredentialsè®¾ç½®ï¼Œæœ‰çš„æµè§ˆå™¨è¿˜æ˜¯ä¼šä¸€èµ·å‘é€Cookieã€‚è¿™æ—¶ï¼Œå¯ä»¥æ˜¾å¼å…³é—­withCredentialsã€‚ 1xhr.withCredentials = false; éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æžœè¦å‘é€Cookieï¼ŒAccess-Control-Allow-Originå°±ä¸èƒ½è®¾ä¸ºæ˜Ÿå·ï¼Œå¿…é¡»æŒ‡å®šæ˜Žç¡®çš„ã€ä¸Žè¯·æ±‚ç½‘é¡µä¸€è‡´çš„åŸŸåã€‚ åŒæ—¶ï¼ŒCookieä¾ç„¶éµå¾ªåŒæºç­–ç•¥ï¼Œåªæœ‰ç”¨æœåŠ¡å™¨åŸŸåè®¾ç½®çš„Cookieæ‰ä¼šä¸Šä¼ ï¼Œå…¶ä»–åŸŸåçš„Cookieå¹¶ä¸ä¼šä¸Šä¼ ï¼Œä¸”è·¨åŸŸçš„åŽŸç½‘é¡µä»£ç ä¸­çš„document.cookieä¹Ÿæ— æ³•è¯»å–æœåŠ¡å™¨åŸŸåä¸‹çš„Cookieã€‚ ä¸ŽJSONPçš„æ¯”è¾ƒ CORSä¸ŽJSONPçš„ä½¿ç”¨ç›®çš„ç›¸åŒï¼Œä½†æ˜¯æ¯”JSONPæ›´å¼ºå¤§ã€‚ JSONPåªæ”¯æŒGETè¯·æ±‚ï¼ŒCORSæ”¯æŒæ‰€æœ‰ç±»åž‹çš„HTTPè¯·æ±‚ã€‚ JSONPçš„ä¼˜åŠ¿åœ¨äºŽæ”¯æŒè€å¼æµè§ˆå™¨ï¼Œä»¥åŠå¯ä»¥å‘ä¸æ”¯æŒCORSçš„ç½‘ç«™è¯·æ±‚æ•°æ®ã€‚ å‚è€ƒ è·¨åŸŸèµ„æºå…±äº« CORS è¯¦è§£ - é˜®ä¸€å³° HTTPè®¿é—®æŽ§åˆ¶ï¼ˆCORSï¼‰ - MDN CORSâ€”â€”è·¨åŸŸè¯·æ±‚é‚£äº›äº‹å„¿]]></content>
      <tags>
        <tag>CORS</tag>
        <tag>è·¨åŸŸ</tag>
        <tag>åŒæºç­–ç•¥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµè§ˆå™¨çš„åŒæºç­–ç•¥]]></title>
    <url>%2F2019%2F03%2F24%2F%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5%2F</url>
    <content type="text"><![CDATA[æµè§ˆå™¨çš„åŒæºç­–ç•¥æ˜¯ä¸€ä¸ªç”¨äºŽéš”ç¦»æ½œåœ¨æ¶æ„æ–‡ä»¶çš„é‡è¦å®‰å…¨æœºåˆ¶ï¼Œå…¶é™åˆ¶äº†ä»ŽåŒä¸€ä¸ªæºåŠ è½½çš„æ–‡æ¡£æˆ–è„šæœ¬å¦‚ä½•ä¸Žæ¥è‡ªå¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚ æœ¬æ–‡ä»‹ç»äº†åŒæºç­–ç•¥çš„å‡ ä¸ªæ–¹é¢ï¼Œä»¥åŠå¦‚ä½•é¿å…ã€‚ æ¦‚è¿° Â¶ä»€ä¹ˆæ˜¯åŒæº æ‰€è°“çš„â€œåŒæºâ€ï¼Œ æŒ‡çš„æ˜¯â€œä¸‰ä¸ªç›¸åŒâ€ï¼Œå³ï¼š åè®®ç›¸åŒ åŸŸåç›¸åŒ ç«¯å£ç›¸åŒ ä¸¾ä¾‹æ¥è¯´ï¼Œhttps://www.a.com/bbb/ccc.htmlè¿™ä¸ªç½‘å€ï¼Œåè®®ä¸ºhttps://ï¼ŒåŸŸåä¸ºwww.a.comï¼Œç«¯å£ä¸º80ï¼ˆé»˜è®¤çš„80ç«¯å£å¯çœç•¥ï¼‰ã€‚ä»¥ä¸‹å‡ ä¸ªç½‘å€ä¸Žä¹‹çš„åŒæºæƒ…å†µä¸ºï¼š https://www.a.com/xxx/yyy.html -&gt; åŒæº http://www.a.com/bbb/ccc.html -&gt; ä¸åŒæºï¼Œåè®®ä¸åŒ https://m.a.com/bbb/ccc.com -&gt; ä¸åŒæºï¼ŒåŸŸåä¸åŒ https://www.a.com:8080/bbb/ccc.html -&gt; ä¸åŒæºï¼Œç«¯å£ä¸åŒ Â¶åŒæºçš„ç›®çš„ åŒæºç­–ç•¥çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†ä¿è¯ç”¨æˆ·ä¿¡æ¯çš„å®‰å…¨ï¼Œé˜²æ­¢æ¶æ„çš„ç½‘ç«™çªƒå–æ•°æ®ã€‚ Â¶åŒæºçš„é™åˆ¶èŒƒå›´ ç›®å‰ï¼Œå¦‚æžœéžåŒæºï¼Œå…±æœ‰ä¸‰ç§è¡Œä¸ºå—åˆ°é™åˆ¶ã€‚ Cookieã€LocalStorage å’Œ IndexDB æ— æ³•è¯»å–ã€‚ DOM æ— æ³•èŽ·å¾—ã€‚ AJAX è¯·æ±‚ä¸èƒ½å‘é€ã€‚ ä»¥ä¸‹å°†åˆ†åˆ«ä»‹ç»å¦‚ä½•é¿å…è¿™ä¸‰ä¸ªé™åˆ¶ Cookies æœåŠ¡å™¨å†™å…¥æµè§ˆå™¨çš„ä¸€å°æ®µä¿¡æ¯ï¼Œåªæœ‰åŒæºçš„ç½‘é¡µæ‰èƒ½å…±äº«ã€‚ ä½†æ˜¯ï¼Œå¦‚æžœä¸¤ä¸ªç½‘é¡µä¸€çº§åŸŸåç›¸åŒï¼Œåªæ˜¯äºŒçº§åŸŸåä¸åŒï¼Œæµè§ˆå™¨å…è®¸é€šè¿‡è®¾ç½®document.domainå…±äº« Cookieã€‚ ä¸¾ä¾‹æ¥è¯´ï¼ŒAç½‘é¡µæ˜¯https://www.a.com/bbb/ccc.htmlï¼ŒBç½‘é¡µæ˜¯https://m.a.com/xxx/yyy.htmlï¼Œé‚£ä¹ˆï¼Œåªè¦è®¾ç½®ç›¸åŒçš„document.domainï¼Œè¿™ä¸¤ä¸ªç½‘é¡µå°±å¯ä»¥å…±äº«Cookiesäº†ã€‚ 12//ä¸ºä¸¤ä¸ªé¡µé¢è®¾ç½®ç›¸åŒçš„ document.domaindocument.domain = 'a.com'; çŽ°åœ¨ï¼ŒAç½‘é¡µå†…é€šè¿‡è„šæœ¬è®¾ç½®ä¸€ä¸ªCookies 12document.cookies = "test1=hello";document.cookies = "test2=world"; Bç½‘é¡µå°±å¯ä»¥è¯»å–åˆ°è¿™ä¸ªCookiesäº† 1var allCookies = document.cookies; // test1=hello;test2=world æ³¨æ„ï¼šdocument.domainä¸èƒ½éšæ„è®¾ç½®ï¼Œåªèƒ½æŠŠdocument.domainè®¾ç½®æˆè‡ªèº«æˆ–æ›´é«˜ä¸€çº§çš„çˆ¶åŸŸã€‚ 1234// https://www.a.com/bbb/ccc.htmlé¡µé¢ä¸‹document.domain = "b.com";// Uncaught DOMException: Failed to set the 'domain' property on 'Document': 'b.com' is not a suffix of 'www.a.com'. æ­¤å¤–ï¼Œè¿™ç§æ–¹æ³•åªé€‚ç”¨äºŽCookieå’Œiframeçª—å£ï¼ŒLocalStorageå’ŒIndexDBæ— æ³•é€šè¿‡è¿™ç§æ–¹æ³•æ¥è§„é¿åŒæºç­–ç•¥ï¼Œè€Œè¦ä½¿ç”¨ä¸‹æ–‡ä»‹ç»çš„PostMessage APIã€‚ å¦å¤–ï¼ŒæœåŠ¡å™¨ä¹Ÿå¯ä»¥åœ¨è®¾ç½®Cookieçš„æ—¶å€™ï¼ŒæŒ‡å®šCookieçš„æ‰€å±žåŸŸåä¸ºä¸€çº§åŸŸåï¼Œæ¯”å¦‚.a.comã€‚ 1Set-Cookie: key=value; domain=.a.com; path=/ è¿™æ ·çš„è¯ï¼ŒäºŒçº§åŸŸåå’Œä¸‰çº§åŸŸåä¸ç”¨åšä»»ä½•è®¾ç½®ï¼Œéƒ½å¯ä»¥è¯»å–è¿™ä¸ªCookieã€‚ PSï¼šå¦‚æžœä¸¤ä¸ªç½‘å€ï¼Œåè®®ä¸åŒæˆ–ç«¯å£ä¸åŒï¼Œå…¶Cookieså¯å…±äº«ï¼Œå³ï¼šCookieå…±äº«è·Ÿåè®®ã€ç«¯å£æ— å…³ è·¨åŸŸæ–‡æ¡£é€šä¿¡ å¦‚æžœä¸¤ä¸ªç½‘é¡µä¸åŒæºï¼Œå°±æ— æ³•æ‹¿åˆ°å¯¹æ–¹çš„DOMï¼Œä¹Ÿæ— æ³•è¿›è¡Œé€šä¿¡ã€‚å…¸åž‹çš„ä¾‹å­æ˜¯iframeçª—å£å’Œwindow.openæ–¹æ³•æ‰“å¼€çš„çª—å£ï¼Œå®ƒä»¬ä¸Žçˆ¶çª—å£æ— æ³•é€šä¿¡ã€‚ æ¯”å¦‚ï¼Œçˆ¶çª—å£è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¦‚æžœiframeçª—å£ä¸æ˜¯åŒæºï¼Œå°±ä¼šæŠ¥é”™ã€‚ 12document.getElementById("myIFrame").contentWindow.document// Uncaught DOMException: Blocked a frame from accessing a cross-origin frame. ä¸Šé¢å‘½ä»¤ä¸­ï¼Œçˆ¶çª—å£æƒ³èŽ·å–å­çª—å£çš„DOMï¼Œå› ä¸ºè·¨æºå¯¼è‡´æŠ¥é”™ã€‚ åä¹‹äº¦ç„¶ï¼Œå­çª—å£èŽ·å–ä¸»çª—å£çš„DOMä¹Ÿä¼šæŠ¥é”™ã€‚ 12window.parent.document.body// æŠ¥é”™ å¦‚æžœä¸¤ä¸ªçª—å£ä¸€çº§åŸŸåç›¸åŒï¼Œåªæ˜¯äºŒçº§åŸŸåä¸åŒï¼Œé‚£ä¹ˆè®¾ç½®ä¸Šä¸€èŠ‚ä»‹ç»çš„document.domainå±žæ€§ï¼Œå°±å¯ä»¥è§„é¿åŒæºç­–ç•¥ï¼Œæ‹¿åˆ°DOMã€‚ å¯¹äºŽå®Œå…¨ä¸åŒæºçš„ç½‘ç«™ï¼Œç›®å‰æœ‰ä¸‰ç§æ–¹æ³•ï¼Œå¯ä»¥è§£å†³è·¨åŸŸçª—å£çš„é€šä¿¡é—®é¢˜ã€‚ ç‰‡æ®µè¯†åˆ«ç¬¦ï¼ˆfragment identifierï¼‰ window.name window.postMessage Â¶ç‰‡æ®µè¯†åˆ«ç¬¦ï¼ˆfragment identifierï¼‰ ç‰‡æ®µæ ‡è¯†ç¬¦ï¼ˆfragment identifierï¼‰æŒ‡çš„æ˜¯ï¼ŒURLçš„#å·åŽé¢çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚https://www.a.com/bbb/ccc.html#fragmentçš„#fragmentã€‚å¦‚æžœåªæ˜¯æ”¹å˜ç‰‡æ®µæ ‡è¯†ç¬¦ï¼Œé¡µé¢ä¸ä¼šé‡æ–°åˆ·æ–°ã€‚ çˆ¶çª—å£å¯ä»¥æŠŠä¿¡æ¯ï¼Œå†™å…¥å­çª—å£çš„ç‰‡æ®µæ ‡è¯†ç¬¦ã€‚ 12var src = originURL + '#' + data;document.getElementById('myIFrame').src = src; å­çª—å£é€šè¿‡ç›‘å¬hashchangeäº‹ä»¶å¾—åˆ°é€šçŸ¥ã€‚ 123456window.onhashchange = checkMessage;function checkMessage() &#123; var message = window.location.hash; // ...&#125; åŒæ ·çš„ï¼Œå­çª—å£ä¹Ÿå¯ä»¥æ”¹å˜çˆ¶çª—å£çš„ç‰‡æ®µæ ‡è¯†ç¬¦ã€‚ 1parent.location.href= target + "#" + hash; Â¶window.name æµè§ˆå™¨çª—å£æœ‰window.nameå±žæ€§ã€‚è¿™ä¸ªå±žæ€§çš„æœ€å¤§ç‰¹ç‚¹æ˜¯ï¼Œåªè¦å½“å‰çš„è¿™ä¸ªæµè§ˆå™¨tabæ²¡æœ‰å…³é—­ï¼Œæ— è®ºtabå†…çš„ç½‘é¡µå¦‚ä½•å˜åŠ¨ï¼Œè¿™ä¸ªnameå€¼éƒ½å¯ä»¥ä¿æŒï¼Œå¹¶ä¸”tabå†…çš„æ¯ä¸ªç½‘é¡µéƒ½æ˜¯å¯ä»¥æŽ¥æ”¶å’Œè®¾ç½®window.nameè¿™ä¸ªå€¼çš„ã€‚ F5åˆ·æ–°å¤šå°‘æ¬¡éƒ½å¯ä»¥ï¼Œè¿™æ˜¯æ— æ‰€è°“çš„ã€‚ ä¸­é—´è·³è½¬è¿‡å¤šå°‘ä¸ªé¡µé¢ï¼Œè¿™ä¹Ÿæ˜¯æ— æ‰€è°“çš„ã€‚ æ‰¿è½½è¿‡çš„è¿™äº›é¡µé¢æ˜¯ä¸æ˜¯åŒä¸€ä¸ªåŸŸåï¼Œè¿™éƒ½æ˜¯æ— æ‰€è°“çš„ã€‚ ä¸Šè¿°çš„tabï¼Œæ”¹æˆiframeåŒæ ·å¯è¡Œã€‚ çˆ¶çª—å£å…ˆæ‰“å¼€ä¸€ä¸ªå­çª—å£ï¼Œè½½å…¥ä¸€ä¸ªä¸åŒæºçš„ç½‘é¡µï¼Œè¯¥ç½‘é¡µå°†ä¿¡æ¯å†™å…¥window.nameå±žæ€§ã€‚ 12345// åœ¨å­çª—å£ä¸­è®¾ç½®å…¶window.namewindow.name = data;// æŽ¥ç€ï¼Œå­çª—å£è·³å›žä¸€ä¸ªä¸Žä¸»çª—å£åŒåŸŸçš„ç½‘å€ã€‚location = 'http://parent.url.com/xxx.html'; ç„¶åŽï¼Œä¸»çª—å£å°±å¯ä»¥è¯»å–å­çª—å£çš„window.nameäº†ã€‚ 12// ä¸»çª—å£ä¸­var data = document.getElementById('myFrame').contentWindow.name; è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ï¼Œwindow.nameå®¹é‡å¾ˆå¤§ï¼Œå¯ä»¥æ”¾ç½®éžå¸¸é•¿çš„å­—ç¬¦ä¸²ï¼›ç¼ºç‚¹æ˜¯å¿…é¡»ç›‘å¬å­çª—å£window.nameå±žæ€§çš„å˜åŒ–ï¼Œå½±å“ç½‘é¡µæ€§èƒ½ã€‚ Â¶window.postMessage åœ¨HTML5ä¸­ï¼Œä¸ºäº†å®žçŽ°è·¨æºé€šä¿¡ï¼Œå¼•å…¥äº†ä¸€ä¸ªå…¨æ–°çš„APIï¼šè·¨æ–‡æ¡£é€šä¿¡ APIï¼ˆCross-document messagingï¼‰ã€‚ è¿™ä¸ªAPIä¸ºwindowå¯¹è±¡æ–°å¢žäº†ä¸€ä¸ªwindow.postMessageæ–¹æ³•ï¼Œå…è®¸è·¨çª—å£é€šä¿¡ï¼Œä¸è®ºè¿™ä¸¤ä¸ªçª—å£æ˜¯å¦åŒæºã€‚ å…¶è¯­æ³•ä¸ºï¼š otherWindow.postMessage(message, targetOrigin, [transfer]); otherWindow å…¶ä»–çª—å£çš„ä¸€ä¸ªå¼•ç”¨ï¼Œæ¯”å¦‚iframeçš„contentWindowå±žæ€§ã€æ‰§è¡Œwindow.openè¿”å›žçš„çª—å£å¯¹è±¡ã€æˆ–è€…æ˜¯å‘½åè¿‡æˆ–æ•°å€¼ç´¢å¼•çš„window.framesã€‚ message å°†è¦å‘é€åˆ°å…¶ä»–windowçš„æ•°æ®ã€‚è¯¥å‚æ•°å¯ä¼ å…¥ä¸€ä¸ªObject. targetOrigin é€šè¿‡çª—å£çš„originå±žæ€§æ¥æŒ‡å®šå“ªäº›çª—å£èƒ½æŽ¥æ”¶åˆ°æ¶ˆæ¯äº‹ä»¶ï¼Œå…¶å€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²*ï¼ˆè¡¨ç¤ºæ— é™åˆ¶ï¼‰æˆ–è€…ä¸€ä¸ªURIã€‚åœ¨å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œå¦‚æžœç›®æ ‡çª—å£çš„åè®®ã€ä¸»æœºåœ°å€æˆ–ç«¯å£è¿™ä¸‰è€…çš„ä»»æ„ä¸€é¡¹ä¸åŒ¹é…targetOriginæä¾›çš„å€¼ï¼Œé‚£ä¹ˆæ¶ˆæ¯å°±ä¸ä¼šè¢«å‘é€ï¼›åªæœ‰ä¸‰è€…å®Œå…¨åŒ¹é…ï¼Œæ¶ˆæ¯æ‰ä¼šè¢«å‘é€ã€‚è¿™ä¸ªæœºåˆ¶ç”¨æ¥æŽ§åˆ¶æ¶ˆæ¯å¯ä»¥å‘é€åˆ°å“ªäº›çª—å£ï¼›ä¾‹å¦‚ï¼Œå½“ç”¨postMessageä¼ é€å¯†ç æ—¶ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¾å¾—å°¤ä¸ºé‡è¦ï¼Œå¿…é¡»ä¿è¯å®ƒçš„å€¼ä¸Žè¿™æ¡åŒ…å«å¯†ç çš„ä¿¡æ¯çš„é¢„æœŸæŽ¥å—è€…çš„originå±žæ€§å®Œå…¨ä¸€è‡´ï¼Œæ¥é˜²æ­¢å¯†ç è¢«æ¶æ„çš„ç¬¬ä¸‰æ–¹æˆªèŽ·ã€‚å¦‚æžœä½ æ˜Žç¡®çš„çŸ¥é“æ¶ˆæ¯åº”è¯¥å‘é€åˆ°å“ªä¸ªçª—å£ï¼Œé‚£ä¹ˆè¯·å§‹ç»ˆæä¾›ä¸€ä¸ªæœ‰ç¡®åˆ‡å€¼çš„targetOriginï¼Œè€Œä¸æ˜¯*ã€‚ä¸æä¾›ç¡®åˆ‡çš„ç›®æ ‡å°†å¯¼è‡´æ•°æ®æ³„éœ²åˆ°ä»»ä½•å¯¹æ•°æ®æ„Ÿå…´è¶£çš„æ¶æ„ç«™ç‚¹ã€‚ transfer å¯é€‰ æ˜¯ä¸€ä¸²å’ŒmessageåŒæ—¶ä¼ é€’çš„Transferableå¯¹è±¡. è¿™äº›å¯¹è±¡çš„æ‰€æœ‰æƒå°†è¢«è½¬ç§»ç»™æ¶ˆæ¯çš„æŽ¥æ”¶æ–¹ï¼Œè€Œå‘é€ä¸€æ–¹å°†ä¸å†ä¿æœ‰æ‰€æœ‰æƒã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œçˆ¶çª—å£http://a.comå‘å­çª—å£http://b.comå‘æ¶ˆæ¯ï¼Œè°ƒç”¨postMessageæ–¹æ³•å°±å¯ä»¥äº†ã€‚ 123// çˆ¶çª—å£ä¸­var popup = window.open('http://b.com', 'title');popup.postMessage('Hello World!', 'http://b.com'); å­çª—å£å‘çˆ¶çª—å£å‘é€æ¶ˆæ¯çš„å†™æ³•ç±»ä¼¼ã€‚ 12// å­çª—å£ä¸­window.opener.postMessage('I get!', 'http://a.com'); çˆ¶çª—å£å’Œå­çª—å£éƒ½å¯ä»¥é€šè¿‡messageäº‹ä»¶ï¼Œç›‘å¬å¯¹æ–¹çš„æ¶ˆæ¯ã€‚ 123window.addEventListener('message', function(event) &#123; console.log(event.data);&#125;, false); messageäº‹ä»¶çš„äº‹ä»¶å¯¹è±¡eventï¼Œæä¾›ä»¥ä¸‹ä¸‰ä¸ªå±žæ€§ã€‚ event.sourceï¼šå¯¹å‘é€æ¶ˆæ¯çš„çª—å£å¯¹è±¡çš„å¼•ç”¨ï¼›å¯ä»¥ä½¿ç”¨æ­¤æ¥åœ¨å…·æœ‰ä¸åŒoriginçš„ä¸¤ä¸ªçª—å£ä¹‹é—´å»ºç«‹åŒå‘é€šä¿¡ã€‚ event.originï¼šè°ƒç”¨postMessageæ—¶æ¶ˆæ¯å‘é€æ–¹çª—å£çš„originã€‚è¿™ä¸ªå­—ç¬¦ä¸²ç”±åè®®ã€://ã€åŸŸåã€:ç«¯å£å·æ‹¼æŽ¥è€Œæˆã€‚è¿™ä¸ªoriginä¸èƒ½ä¿è¯æ˜¯è¯¥çª—å£çš„å½“å‰æˆ–æœªæ¥originï¼Œå› ä¸ºpostMessageè¢«è°ƒç”¨åŽå¯èƒ½è¢«å¯¼èˆªåˆ°ä¸åŒçš„ä½ç½®ã€‚ event.dataï¼šä»Žå…¶ä»–windowä¸­ä¼ é€’è¿‡æ¥çš„æ¶ˆæ¯å†…å®¹å¯¹è±¡ã€‚ å­çª—å£å¯ä»¥é€šè¿‡event.sourceå±žæ€§å¼•ç”¨çˆ¶çª—å£ï¼Œç„¶åŽå‘é€æ¶ˆæ¯ã€‚ 12345// å­çª—å£ä¸­window.addEventListener('message', receiveMessage);function receiveMessage(event) &#123; event.source.postMessage('Nice to see you!', '*');&#125; event.originå±žæ€§å¯ä»¥è¿‡æ»¤ä¸æ˜¯å‘ç»™æœ¬çª—å£çš„æ¶ˆæ¯ã€‚ 123456789window.addEventListener('message', receiveMessage);function receiveMessage(event) &#123; if (event.origin !== 'http://aaa.com') return; if (event.data === 'Hello World') &#123; event.source.postMessage('Hello', event.origin); &#125; else &#123; console.log(event.data); &#125;&#125; æ³¨æ„ï¼šä»»ä½•çª—å£å¯ä»¥åœ¨ä»»ä½•å…¶ä»–çª—å£è®¿é—®æ­¤æ–¹æ³•ï¼Œåœ¨ä»»ä½•æ—¶é—´ï¼Œæ— è®ºæ–‡æ¡£åœ¨çª—å£ä¸­çš„ä½ç½®ï¼Œå‘å…¶å‘é€æ¶ˆæ¯ã€‚ å› æ­¤ï¼Œç”¨äºŽæŽ¥æ”¶æ¶ˆæ¯çš„ä»»ä½•äº‹ä»¶ç›‘å¬å™¨å¿…é¡»é¦–å…ˆä½¿ç”¨originå’Œsourceå±žæ€§æ¥æ£€æŸ¥æ¶ˆæ¯çš„å‘é€è€…çš„èº«ä»½ã€‚æ— æ³•æ£€æŸ¥originå’Œsourceå±žæ€§ä¼šå¯¼è‡´è·¨ç«™ç‚¹è„šæœ¬æ”»å‡»ã€‚ å› ä¸ºæœ‰äº†window.postMessageï¼Œè¯»å†™å…¶ä»–çª—å£çš„LocalStorageä¹Ÿæˆä¸ºäº†å¯èƒ½ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œä¸»çª—å£å†™å…¥iframeå­çª—å£çš„localStorageã€‚ 12345678// å­çª—å£ä¸­window.onmessage = function(e) &#123; if (e.origin !== 'http://aaa.com') &#123; return; &#125; var payload = JSON.parse(e.data); localStorage.setItem(payload.key, JSON.stringify(payload.data));&#125;; ä¸Šé¢ä»£ç ä¸­ï¼Œå­çª—å£å°†çˆ¶çª—å£å‘æ¥çš„æ¶ˆæ¯ï¼Œå†™å…¥è‡ªå·±çš„localStorageã€‚ çˆ¶çª—å£å‘é€æ¶ˆæ¯çš„ä»£ç å¦‚ä¸‹ 123var win = document.getElementsByTagName('iframe')[0].contentWindow;var obj = &#123; name: 'Jack' &#125;;win.postMessage(JSON.stringify(&#123;key: 'storage', data: obj&#125;), 'http://bbb.com'); åŠ å¼ºç‰ˆçš„å­çª—å£æŽ¥æ”¶æ¶ˆæ¯çš„ä»£ç å¦‚ä¸‹ 1234567891011121314151617window.onmessage = function(e) &#123; if (e.origin !== 'http://aaa.com') return; var payload = JSON.parse(e.data); switch (payload.method) &#123; case 'set': localStorage.setItem(payload.key, JSON.stringify(payload.data)); break; case 'get': var parent = window.parent; var data = localStorage.getItem(payload.key); parent.postMessage(data, 'http://aaa.com'); break; case 'remove': localStorage.removeItem(payload.key); break; &#125;&#125;; åŠ å¼ºç‰ˆçš„çˆ¶çª—å£å‘é€æ¶ˆæ¯ä»£ç å¦‚ä¸‹ 1234567891011var win = document.getElementsByTagName('iframe')[0].contentWindow;var obj = &#123; name: 'Jack' &#125;;// å­˜å…¥å¯¹è±¡win.postMessage(JSON.stringify(&#123;key: 'storage', method: 'set', data: obj&#125;), 'http://bbb.com');// è¯»å–å¯¹è±¡win.postMessage(JSON.stringify(&#123;key: 'storage', method: 'get'&#125;), 'http://bbb.com');window.onmessage = function(e) &#123; if (e.origin != 'http://bbb.com') return; // "Jack" console.log(JSON.parse(e.data).name);&#125;; AJAX åŒæºç­–ç•¥è§„å®šï¼ŒAJAXè¯·æ±‚åªèƒ½å‘ç»™åŒæºçš„ç½‘å€ï¼Œå¦åˆ™å°±æŠ¥é”™ã€‚ è§„é¿è¿™ä¸ªé™åˆ¶æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š ä½¿ç”¨Flashæ’ä»¶å‘é€HTTPè¯·æ±‚ æž¶è®¾æœåŠ¡å™¨ä»£ç† JSONP WebSocket CORS Â¶ä½¿ç”¨Flashæ’ä»¶å‘é€HTTPè¯·æ±‚ è¿™ç§æ–¹å¼å¯ä»¥ç»•è¿‡æµè§ˆå™¨çš„å®‰å…¨é™åˆ¶ï¼Œä½†å¿…é¡»å®‰è£…Flashï¼Œå¹¶ä¸”è·ŸFlashäº¤äº’ã€‚ä¸è¿‡Flashç”¨èµ·æ¥éº»çƒ¦ï¼Œè€Œä¸”çŽ°åœ¨ç”¨å¾—ä¹Ÿè¶Šæ¥è¶Šå°‘äº†ã€‚ Â¶æž¶è®¾æœåŠ¡å™¨ä»£ç† åœ¨åŒæºåŸŸåä¸‹æž¶è®¾ä¸€ä¸ªä»£ç†æœåŠ¡å™¨æ¥è½¬å‘ï¼ŒJavaScriptè´Ÿè´£æŠŠè¯·æ±‚å‘é€åˆ°ä»£ç†æœåŠ¡å™¨ï¼š 1'/proxy?url=http://www.sina.com.cn' ä»£ç†æœåŠ¡å™¨å†æŠŠç»“æžœè¿”å›žï¼Œè¿™æ ·å°±éµå®ˆäº†æµè§ˆå™¨çš„åŒæºç­–ç•¥ã€‚è¿™ç§æ–¹å¼éº»çƒ¦ä¹‹å¤„åœ¨äºŽéœ€è¦æœåŠ¡å™¨ç«¯é¢å¤–åšå¼€å‘ã€‚ Â¶JSONP JSONPæ˜¯æœåŠ¡å™¨ä¸Žå®¢æˆ·ç«¯è·¨æºé€šä¿¡çš„å¸¸ç”¨æ–¹æ³•ã€‚æœ€å¤§ç‰¹ç‚¹å°±æ˜¯ç®€å•é€‚ç”¨ï¼Œè€å¼æµè§ˆå™¨å…¨éƒ¨æ”¯æŒï¼ŒæœåŠ¡å™¨æ”¹é€ éžå¸¸å°ã€‚ å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œç½‘é¡µé€šè¿‡æ·»åŠ ä¸€ä¸ª&lt;script&gt;æ ‡ç­¾ï¼Œå‘æœåŠ¡å™¨è¯·æ±‚JSONæ•°æ®ï¼Œè¿™ç§åšæ³•ä¸å—åŒæºç­–ç•¥é™åˆ¶ï¼›æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åŽï¼Œå°†æ•°æ®æ”¾åœ¨ä¸€ä¸ªæŒ‡å®šåå­—çš„å›žè°ƒå‡½æ•°é‡Œä¼ å›žæ¥ã€‚å®ƒæœ‰ä¸ªé™åˆ¶ï¼Œåªèƒ½ç”¨GETè¯·æ±‚ï¼Œå¹¶ä¸”è¦æ±‚è¿”å›žJavaScriptã€‚ï¼ˆå› ä¸º&lt;script&gt;æ ‡ç­¾åªèƒ½ä½¿ç”¨GETåŠ è½½èµ„æºï¼‰ JSONPé€šå¸¸ä»¥å‡½æ•°è°ƒç”¨çš„å½¢å¼è¿”å›žã€‚ä¾‹å¦‚ï¼Œè°ƒç”¨æŸä¸€æŽ¥å£ï¼Œè¿”å›žJavaScriptå†…å®¹å¦‚ä¸‹ï¼š 1foo(&#123;test: "hello"&#125;); å› æ­¤æˆ‘ä»¬éœ€è¦é¦–å…ˆåœ¨é¡µé¢ä¸­å‡†å¤‡å¥½å›žè°ƒå‡½æ•°ï¼š 1234function foo(data)&#123; alert(data.test); // ...&#125; ç„¶åŽè°ƒç”¨å¦ä¸€å‡½æ•°getData()è§¦å‘ï¼š 12345function getPrice() &#123; var script = document.createElement('script'); script.src = 'http://api.a.com/?callback=foo'; // æ³¨æ„ï¼Œè¯¥è¯·æ±‚çš„æŸ¥è¯¢å­—ç¬¦ä¸²æœ‰ä¸€ä¸ªcallbackå‚æ•°ï¼Œç”¨æ¥æŒ‡å®šå›žè°ƒå‡½æ•°çš„åå­—ï¼Œè¿™å¯¹äºŽJSONPæ˜¯å¿…éœ€çš„ã€‚ä¸€èˆ¬å‚æ•°åç”±APIæŽ¥å£ç¡®å®šï¼Œå¸¸ç”¨ä¸ºcallbackã€‚ document.body.appendChild(script);&#125; ç”±äºŽ&lt;script&gt;æ ‡ç­¾è¯·æ±‚çš„è„šæœ¬ï¼Œç›´æŽ¥ä½œä¸ºä»£ç è¿è¡Œã€‚è¿™æ—¶ï¼Œåªè¦æµè§ˆå™¨å®šä¹‰äº†fooå‡½æ•°ï¼Œè¯¥å‡½æ•°å°±ä¼šç«‹å³è°ƒç”¨ã€‚ä½œä¸ºå‚æ•°çš„JSONæ•°æ®è¢«è§†ä¸ºJavaScriptå¯¹è±¡ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²ï¼Œå› æ­¤é¿å…äº†ä½¿ç”¨JSON.parseçš„æ­¥éª¤ã€‚ Â¶WebSocket WebSocketæ˜¯ä¸€ç§é€šä¿¡åè®®ï¼Œä½¿ç”¨ws://ï¼ˆéžåŠ å¯†ï¼‰å’Œwss://ï¼ˆåŠ å¯†ï¼‰ä½œä¸ºåè®®å‰ç¼€ã€‚è¯¥åè®®ä¸å®žè¡ŒåŒæºç­–ç•¥ï¼Œåªè¦æœåŠ¡å™¨æ”¯æŒï¼Œå°±å¯ä»¥é€šè¿‡å®ƒè¿›è¡Œè·¨æºé€šä¿¡ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œæµè§ˆå™¨å‘å‡ºçš„WebSocketè¯·æ±‚çš„å¤´ä¿¡æ¯ï¼ˆæ‘˜è‡ªç»´åŸºç™¾ç§‘ï¼‰ã€‚ 12345678GET /chat HTTP/1.1Host: server.example.comUpgrade: websocketConnection: UpgradeSec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==Sec-WebSocket-Protocol: chat, superchatSec-WebSocket-Version: 13Origin: http://example.com ä¸Šé¢ä»£ç ä¸­ï¼Œæœ‰ä¸€ä¸ªå­—æ®µæ˜¯Originï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚çš„è¯·æ±‚æºï¼ˆoriginï¼‰ï¼Œå³å‘è‡ªå“ªä¸ªåŸŸåã€‚ æ­£æ˜¯å› ä¸ºæœ‰äº†Originè¿™ä¸ªå­—æ®µï¼Œæ‰€ä»¥WebSocketæ‰æ²¡æœ‰å®žè¡ŒåŒæºç­–ç•¥ã€‚å› ä¸ºæœåŠ¡å™¨å¯ä»¥æ ¹æ®è¿™ä¸ªå­—æ®µï¼Œåˆ¤æ–­æ˜¯å¦è®¸å¯æœ¬æ¬¡é€šä¿¡ã€‚å¦‚æžœè¯¥åŸŸååœ¨ç™½åå•å†…ï¼ŒæœåŠ¡å™¨å°±ä¼šåšå‡ºå¦‚ä¸‹å›žåº”ã€‚ 12345HTTP/1.1 101 Switching ProtocolsUpgrade: websocketConnection: UpgradeSec-WebSocket-Accept: HSmrc0sMlYUkAGmm5OPpG2HaGWk=Sec-WebSocket-Protocol: chat Â¶CORS CORSå…¨ç§°Cross-Origin Resource Sharingï¼Œæ˜¯HTML5è§„èŒƒå®šä¹‰çš„å¦‚ä½•è·¨åŸŸè®¿é—®èµ„æºï¼Œæ˜¯è·¨æºAJAXè¯·æ±‚çš„æ ¹æœ¬è§£å†³æ–¹æ³•ã€‚ç›¸æ¯”JSONPåªèƒ½å‘GETè¯·æ±‚ï¼ŒCORSå…è®¸ä»»ä½•ç±»åž‹çš„è¯·æ±‚ã€‚ Originè¡¨ç¤ºæœ¬åŸŸï¼Œä¹Ÿå°±æ˜¯æµè§ˆå™¨å½“å‰é¡µé¢çš„åŸŸã€‚å½“JavaScriptå‘å¤–åŸŸï¼ˆå¦‚sina.comï¼‰å‘èµ·è¯·æ±‚åŽï¼Œæµè§ˆå™¨æ”¶åˆ°å“åº”åŽï¼Œé¦–å…ˆæ£€æŸ¥Access-Control-Allow-Originæ˜¯å¦åŒ…å«æœ¬åŸŸï¼Œå¦‚æžœæ˜¯ï¼Œåˆ™æ­¤æ¬¡è·¨åŸŸè¯·æ±‚æˆåŠŸï¼Œå¦‚æžœä¸æ˜¯ï¼Œåˆ™è¯·æ±‚å¤±è´¥ï¼ŒJavaScriptå°†æ— æ³•èŽ·å–åˆ°å“åº”çš„ä»»ä½•æ•°æ®ã€‚ è¯¦ç»†çš„ä»‹ç»ï¼Œå¯ä»¥å‚è€ƒæ­¤æ–‡ å‚è€ƒ æµè§ˆå™¨åŒæºæ”¿ç­–åŠå…¶è§„é¿æ–¹æ³• - é˜®ä¸€å³° æµè§ˆå™¨çš„åŒæºç­–ç•¥ - MDN window.postMessage - MDN window.name è·¨åŸŸéšå¼ä¼ é€’æ¶ˆæ¯åŽŸç†è§£æž - è‹å—å¤§å” AJAX - å»–é›ªå³°]]></content>
      <tags>
        <tag>åŒæºç­–ç•¥</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
</search>
